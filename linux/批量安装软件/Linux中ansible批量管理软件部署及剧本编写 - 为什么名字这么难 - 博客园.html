<!DOCTYPE html>
<!-- saved from url=(0049)https://www.cnblogs.com/2lianzhang/p/8058762.html -->
<html lang="zh-cn"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="referrer" content="origin">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <title>Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园</title>
    <meta property="og:description" content="服务器版本信息： Centos6.9 ansible软件介绍 ansible是一个基于Python开发的自动化运维工具！ 其功能实现基于SSH远程连接服务！ ansible可以实现批量系统配置、批量软">
    <link type="text/css" rel="stylesheet" href="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/blog-common.css">
<link id="MainCss" type="text/css" rel="stylesheet" href="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/bundle-InsideDotNet.css">
<link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/bundle-InsideDotNet-mobile.css">
    <link title="RSS" type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/2lianzhang/rss">
    <link title="RSD" type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/2lianzhang/rsd.xml">
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/2lianzhang/wlwmanifest.xml">
    <script src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/amp4ads-host-v0.js.下载"></script><script src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/pubads_impl_rendering_2019062001.js.下载"></script><script async="" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/analytics.js.下载"></script><script type="text/javascript" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/encoder.js.下载"></script><script src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/jquery-2.2.0.min.js.下载"></script>
    <script>var currentBlogId=401912;var currentBlogApp='2lianzhang',cb_enable_mathjax=false;var isLogined=false;</script>
    <script src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/blog-common.js.下载" type="text/javascript"></script>
<link rel="preload" href="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/f.txt" as="script"><script type="text/javascript" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/f.txt"></script><script src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/pubads_impl_2019062001.js.下载" async=""></script><link rel="prefetch" href="https://tpc.googlesyndication.com/safeframe/1-0-35/html/container.html"></head>
<body>
<a name="top"></a>


<!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
	<div style="display:none"><img src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/top.gif" alt="谨以此模板祝贺【博客园开发者征途】系列图书《你必须知道的.net》出版发行"></div>
	<a id="lnkBlogLogo" href="https://www.cnblogs.com/2lianzhang/"><img id="blogLogo" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/logo.gif" alt="返回主页"></a>			
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="https://www.cnblogs.com/2lianzhang/">名字呢！</a></h1>
<h2></h2>



		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
    <li><a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">博客园</a></li>
    <li><a id="MyLinks1_SpaceLink" class="menu" href="http://ing.cnblogs.com/">闪存</a></li>
    <li><a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/2lianzhang/">首页</a></li>
    <li><a id="blog_nav_newpost" class="menu" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a></li>
    <li><a id="blog_nav_contact" accesskey="9" class="menu" rel="nofollow" href="https://msg.cnblogs.com/send/%E4%B8%BA%E4%BB%80%E4%B9%88%E5%90%8D%E5%AD%97%E8%BF%99%E4%B9%88%E9%9A%BE">联系</a></li>
    <li><a id="blog_nav_admin" class="menu" rel="nofollow" href="https://i.cnblogs.com/">管理</a></li>
    <li><a id="blog_nav_rss" class="menu" href="https://www.cnblogs.com/2lianzhang/rss">订阅</a>
        <a id="blog_nav_rss_image" class="aHeaderXML" href="https://www.cnblogs.com/2lianzhang/rss"><img src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/xml.gif" alt="订阅"></a></li>
</ul>


		<div class="clear"></div>
		<div class="blogStats">
			
			<div id="blog_stats">
<!--done-->
随笔- 11&nbsp;
文章- 0&nbsp;
评论- 0&nbsp;
</div>
			
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->

<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		
        <div id="post_detail">
<!--done-->
<div id="topics">
	<div class="post">
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/2lianzhang/p/8058762.html">Linux中ansible批量管理软件部署及剧本编写</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body"><p>服务器版本信息：</p>
<p>Centos6.9</p>
<div class="cnblogs_code">
<pre>[root@db02 ~]# uname -a
Linux db02 2.6.32-696.el6.x86_64 #1 SMP Tue Mar 21 19:29:05 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux</pre>
</div>
<h2>ansible软件介绍</h2>
<p>ansible是一个基于Python开发的自动化运维工具！</p>
<p>其功能实现基于SSH远程连接服务！</p>
<p>ansible可以实现批量系统配置、批量软件部署、批量文件拷贝、批量运行命令等功能</p>
<p>ansible官方资料</p>
<p>官网：<a href="http://www.ansible.com/home" target="_blank">http://www.ansible.com/home</a></p>
<p>官网文档：<a href="http://docs.ansible.com/ansible/index.html" target="_blank">http://docs.ansible.com/ansible/index.html</a></p>
<h3>ansible软件特点</h3>
<ul>
<li>&nbsp; 不需要单独安装客户端，基于系统自带的sshd服务，sshd就相当于ansible的客户端</li>
<li>&nbsp; 不需要服务端</li>
<li>&nbsp; 依靠大量的模块实现批量管理</li>
<li>&nbsp; 配置文件/etc/snsible/ansible.cfg，不用配置</li>
</ul>
<h3>ansible输出结果的颜色</h3>
<ul>
<li>输出内容显示绿色：表示执行成功，当没有任何改变</li>
<li>输出内容显示黄色：表示执行成功，但对被管理主机进行了改变</li>
<li>输出内容显示红色：表示执行失败</li>
</ul>
<h3>ansible参数</h3>
<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="225">
<p align="center">命令参数</p>
</td>
<td valign="top" width="488">
<p align="center">参数说明</p>
</td>
</tr>
<tr>
<td valign="top" width="225">
<p>-m&nbsp;&nbsp; MODULE_NAME</p>
</td>
<td valign="top" width="488">
<p>--module-name=MODULE_NAME</p>
<p>module name to execute (default=command)</p>
<p>相应名称的模块被执行（默认模块为 command );</p>
<p>-m后边是模块的名字</p>
</td>
</tr>
<tr>
<td valign="top" width="225">
<p>-a&nbsp;&nbsp; MODULE_ARGS</p>
</td>
<td valign="top" width="488">
<p>--args=MODULE_ARGS</p>
<p>module arguments</p>
<p>模块参数信息；</p>
<p>-a后面是要执行的命令；也可以写一个 ip ,针对一台机器来执行命令</p>
</td>
</tr>
<tr>
<td valign="top" width="225">
<p>-C,--check</p>
</td>
<td valign="top" width="488">
<p>don’t make any changes; instead, try to predict some of the changes that may occur</p>
<p>不做任何改变；反而，只是尝试预言一些可能出现的改变</p>
</td>
</tr>
<tr>
<td valign="top" width="225">
<p>--syntax-check</p>
</td>
<td valign="top" width="488">
<p>perform a syntax check on the playbook, but do not execute it 执行语法检查在剧本上，但是并不执行剧本</p>
</td>
</tr>
</tbody>
</table>
<h2>ansible部署</h2>
<p>第一步、首先部署ssh+key免密码登陆方式</p>
<p>ssh+key部署：</p>
<p><a href="http://www.cnblogs.com/lyq863987322/p/7886344.html" target="_blank">http://www.cnblogs.com/2lianzhang/p/8058661.html</a></p>
<p>第二步、被管理端安装libselinux</p>
<div>
<div class="cnblogs_code">
<pre>yum install libselinux-python -y</pre>
</div>
</div>
<p>第三步、服务端安装ansible，配置文件编写</p>
<div>
<div class="cnblogs_code">
<pre>yum install ansible -y</pre>
</div>
</div>
<div>
<h3>ansible的重要目录</h3>
<p>/etc/ansible/hosts &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;--- 定义anisble软件可以管理的主机信息</p>
<p>/usr/bin/ansible &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --- ansible执行命令</p>
<p>/usr/bin/ansible-playboot &nbsp; &nbsp; &nbsp;--- ansible执行剧本命令</p>
<p>/etc/ansible/hosts &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 配置文件编写举例</p>
</div>
<div>
<h3 class="a">在配置文件中添加被管理主机的ip模块</h3>
</div>
<div class="cnblogs_code">
<pre>[name]
172.16.1.21
172.16.1.11
172.16.1.1<br>在/etc/ansible/host文件最后添加[]下面接想要管理的主机ip，[]中起任意名字</pre>
</div>
<p>测试控制这三台主机</p>
<p>命令语法：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;8fa1055b-e036-4ea3-8b24-1092ec509649&#39;)"><img id="code_img_closed_8fa1055b-e036-4ea3-8b24-1092ec509649" class="code_img_closed" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ContractedBlock.gif" alt=""><img id="code_img_opened_8fa1055b-e036-4ea3-8b24-1092ec509649" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;8fa1055b-e036-4ea3-8b24-1092ec509649&#39;,event)" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_8fa1055b-e036-4ea3-8b24-1092ec509649" class="cnblogs_code_hide">
<pre>ansible  name -m shell -a <span style="color: #800000;">"</span><span style="color: #800000;">hostname</span><span style="color: #800000;">"</span><span style="color: #000000;">
ansible    </span>----<span style="color: #000000;"> 命令
name       </span>----<span style="color: #000000;"> 主机模块名称
</span>-m         ----<span style="color: #000000;"> 指定模块的参数
shell      </span>---<span style="color: #000000;"> 模块名称（不同模块不同名称）
</span>-a         ---<span style="color: #000000;"> 指定利用模块执行的动作参数
</span><span style="color: #800000;">"</span><span style="color: #800000;">hostname</span><span style="color: #800000;">"</span> ---- 在被控主机上批量执行的操作 </pre>
</div>
<span class="cnblogs_code_collapse">命令格式</span></div>
<p>执行结果</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>[root@m01 scripts]# ansible name -m shell -a <span style="color: #800000;">"</span><span style="color: #800000;">hostname</span><span style="color: #800000;">"</span>

<span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.21</span> | SUCCESS | rc=<span style="color: #800080;">0</span> &gt;&gt;<span style="color: #000000;">

backup

</span><span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.11</span> | SUCCESS | rc=<span style="color: #800080;">0</span> &gt;&gt;<span style="color: #000000;">

nfs01

</span><span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.1</span> | SUCCESS | rc=<span style="color: #800080;">0</span> &gt;&gt;<span style="color: #000000;">

web01</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>这样就已经可以批量控制多台主机了，主要配置中需要注意的是ssh+key的配置。</p>
<p>如果没有配置ssh+key密钥分发的话，可以在/etc/ansible/host文件配置管理主机的时候 在ip后面空格接：ansible_ssh_user=用户 ansible_ssh_pass=密码，这样也可以管理</p>
<h2>ansible几个常用模块</h2>
<p>ansible帮助：</p>
<div class="cnblogs_code">
<pre>ansible-doc -l         ---列出所有模块信息
ansible-doc -s 模块名   ---看执行模块信息</pre>
</div>
<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="234">
<p align="center">常用模块</p>
</td>
<td valign="top" width="478">
<p align="center">模块说明</p>
</td>
</tr>
<tr>
<td valign="top" width="234">
<p>command&nbsp;&nbsp;(重要模块）</p>
</td>
<td valign="top" width="478">
<p>执行命令模块，ansible命令执行默认模块</p>
</td>
</tr>
<tr>
<td valign="top" width="234">
<p>shell&nbsp;&nbsp;(重要模块）</p>
</td>
<td valign="top" width="478">
<p>执行shell脚本模块</p>
</td>
</tr>
<tr>
<td valign="top" width="234">
<p>script &nbsp;(重要模块）</p>
</td>
<td valign="top" width="478">
<p>把脚本发到客户端，然后执行；执行脚本命令在远端服务器上</p>
</td>
</tr>
<tr>
<td valign="top" width="234">
<p>copy &nbsp;&nbsp;(重要模块）</p>
</td>
<td valign="top" width="478">
<p>把本地文件发送到远端</p>
</td>
</tr>
<tr>
<td valign="top" width="234">
<p>file</p>
</td>
<td valign="top" width="478">
<p>设定文件属性模块</p>
</td>
</tr>
<tr>
<td valign="top" width="234">
<p>service</p>
</td>
<td valign="top" width="478">
<p>系统服务管理模块</p>
</td>
</tr>
<tr>
<td valign="top" width="234">
<p>cron</p>
</td>
<td valign="top" width="478">
<p>计划任务管理模块</p>
</td>
</tr>
<tr>
<td valign="top" width="234">
<p>yum</p>
</td>
<td valign="top" width="478">
<p>yum软件包安装管理模块</p>
</td>
</tr>
<tr>
<td valign="top" width="234">
<p>mount</p>
</td>
<td valign="top" width="478">
<p>挂载模块</p>
</td>
</tr>
<tr>
<td valign="top" width="234">
<p>synchronize</p>
</td>
<td valign="top" width="478">
<p>使用rsync同步文件模块</p>
</td>
</tr>
</tbody>
</table>
<h3>command模块</h3>
<p>ansible中的远程执行命令模块</p>
<div>
<ul>
<li class="a">命令模块中的多个参数设置用空格进行分隔&nbsp;</li>
<li class="a">命令模块中不能出现"&lt;" "&gt;" "|" ";" "&amp;"</li>
</ul>
<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="158">
<p align="center">参数</p>
</td>
<td valign="top" width="554">
<p align="center">说明</p>
</td>
</tr>
<tr>
<td valign="top" width="158">
<p>chdir</p>
</td>
<td valign="top" width="554">
<p>在执行命令之前，通过cd命令进入到指定目录中<br># ansible oldboy -m command -a "chdir=/tmp ls"</p>


</td>


</tr>
<tr>
<td valign="top" width="158">
<p>creates</p>


</td>
<td valign="top" width="554">
<p>定义一个文件是否存在，如果不存在运行相应命令；如果存在跳过此步骤<br>- name: Run the command if the specified file does not exist.<br>command: /usr/bin/make_database.sh arg1 arg2 creates=/path/to/database</p>


</td>


</tr>
<tr>
<td valign="top" width="158">
<p>executable</p>


</td>
<td valign="top" width="554">
<p>改变shell使用command进行执行，并且执行时要使用绝对路径</p>


</td>


</tr>
<tr>
<td valign="top" width="158">
<p>free_form</p>


</td>
<td valign="top" width="554">
<p>free_form</p>
<p>命令模块采用自由形式命令运行；即可以输入任意linux命令</p>


</td>


</tr>
<tr>
<td valign="top" width="158">
<p>removes</p>


</td>
<td valign="top" width="554">
<p>定义一个文件是否存在，如果存在运行相应命令；如果不存在跳过此步骤</p>


</td>


</tr>
<tr>
<td valign="top" width="158">
<p>warn<br>(added in 1.8)</p>


</td>
<td valign="top" width="554">
<p>如果ansible配置文件中定义了命令警告，如果参数设置了no/false，将不会警告此行命令</p>


</td>


</tr>


</tbody>


</table>
<p>实例：</p>
<p>chdir参数：在执行命令之前，通过cd命令进入到指定目录</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;82425702-8670-47ab-b08d-37537856a51e&#39;)"><img id="code_img_closed_82425702-8670-47ab-b08d-37537856a51e" class="code_img_closed" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ContractedBlock.gif" alt=""><img id="code_img_opened_82425702-8670-47ab-b08d-37537856a51e" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;82425702-8670-47ab-b08d-37537856a51e&#39;,event)" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_82425702-8670-47ab-b08d-37537856a51e" class="cnblogs_code_hide">
<pre>[root@m01 scripts]# ansible oldboy -m command -a <span style="color: #800000;">"</span><span style="color: #800000;">chdir=/tmp pwd</span><span style="color: #800000;">"</span>

<span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.21</span> | SUCCESS | rc=<span style="color: #800080;">0</span> &gt;&gt;

/<span style="color: #000000;">tmp

</span><span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.11</span> | SUCCESS | rc=<span style="color: #800080;">0</span> &gt;&gt;

/<span style="color: #000000;">tmp

</span><span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.1</span> | SUCCESS | rc=<span style="color: #800080;">0</span> &gt;&gt;

/tmp</pre>
</div>
<span class="cnblogs_code_collapse">chdir参数</span></div>
</div>
<p>creates参数：定义一个文件是否存在，如果不存在运行相应命令;如果存在跳过此步骤</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;27158c3e-30a0-42b1-930b-9ad32ad58dc7&#39;)"><img id="code_img_closed_27158c3e-30a0-42b1-930b-9ad32ad58dc7" class="code_img_closed" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ContractedBlock.gif" alt=""><img id="code_img_opened_27158c3e-30a0-42b1-930b-9ad32ad58dc7" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;27158c3e-30a0-42b1-930b-9ad32ad58dc7&#39;,event)" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_27158c3e-30a0-42b1-930b-9ad32ad58dc7" class="cnblogs_code_hide">
<pre>[root@m01 scripts]# ansible name -m command -a <span style="color: #800000;">"</span><span style="color: #800000;">pwd creates=/tmp/oldboy.txt</span><span style="color: #800000;">"</span>

<span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.21</span> | SUCCESS | rc=<span style="color: #800080;">0</span> &gt;&gt;

/<span style="color: #000000;">root

</span><span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.11</span> | SUCCESS | rc=<span style="color: #800080;">0</span> &gt;&gt;

/<span style="color: #000000;">root

</span><span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.1</span> | SUCCESS | rc=<span style="color: #800080;">0</span> &gt;&gt;

/root</pre>
</div>
<span class="cnblogs_code_collapse">command模块creates参数</span></div>
<div>
<h3>shell模块</h3>
<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="149">
<p align="center">参数</p>
</td>
<td valign="top" width="563">
<p align="center">说明</p>
</td>
</tr>
<tr>
<td valign="top" width="149">
<p>chdir</p>
</td>
<td valign="top" width="563">
<p>在执行命令之前，通过cd命令进入到指定目录中<br># ansible oldboy -m command -a "chdir=/tmp ls"</p>


</td>


</tr>
<tr>
<td valign="top" width="149">
<p>creates</p>


</td>
<td valign="top" width="563">
<p>定义一个文件是否存在，如果不存在运行相应命令；如果存在跳过此步骤<br>- name: Run the command if the specified file does not exist.<br>&nbsp; command: /usr/bin/make_database.sh arg1 arg2 creates=/path/to/database</p>


</td>


</tr>
<tr>
<td valign="top" width="149">
<p>executable</p>


</td>
<td valign="top" width="563">
<p>改变shell使用command进行执行，并且执行时要使用绝对路径</p>


</td>


</tr>
<tr>
<td valign="top" width="149">
<p>free_form</p>


</td>
<td valign="top" width="563">
<p>free_form</p>
<p>命令模块采用自由形式命令运行；即可以输入任意linux命令</p>


</td>


</tr>
<tr>
<td valign="top" width="149">
<p>removes</p>


</td>
<td valign="top" width="563">
<p>定义一个文件是否存在，如果存在运行相应命令；如果不存在跳过此步骤</p>


</td>


</tr>
<tr>
<td valign="top" width="149">
<p>warn<br>(added in 1.8)</p>


</td>
<td valign="top" width="563">
<p>如果ansible配置文件中定义了命令警告，如果参数设置了no/false，将不会警告此行命令</p>


</td>


</tr>


</tbody>


</table>


</div>
<p>&nbsp;shell模块类似于command模块，最大区别是shell模块可以执行脚本</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;7ebf8013-a4fa-4651-add6-b329ac385ef4&#39;)"><img id="code_img_closed_7ebf8013-a4fa-4651-add6-b329ac385ef4" class="code_img_closed" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ContractedBlock.gif" alt=""><img id="code_img_opened_7ebf8013-a4fa-4651-add6-b329ac385ef4" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;7ebf8013-a4fa-4651-add6-b329ac385ef4&#39;,event)" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_7ebf8013-a4fa-4651-add6-b329ac385ef4" class="cnblogs_code_hide">
<pre>[root@m01 scripts]# ansible name -m shell -a <span style="color: #800000;">"</span><span style="color: #800000;">sh /server/scripts/name.sh</span><span style="color: #800000;">"</span>
<span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.21</span> | SUCCESS | rc=<span style="color: #800080;">0</span> &gt;&gt;<span style="color: #000000;">
nfs01

</span><span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.11</span> | SUCCESS | rc=<span style="color: #800080;">0</span> &gt;&gt;<span style="color: #000000;">
backup
说明：shell模块在远程执行脚本时，远程主机上一定要有相应脚本</span></pre>
</div>
<span class="cnblogs_code_collapse">shell脚本执行</span></div>
<div>
<h3>script模块</h3>
</div>
<p>在本地执行脚本时，将脚本中的内容传输到远程节点上运行</p>
<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="158">
<p>creates<br>(added in 1.5)</p>


</td>
<td valign="top" width="554">
<p>定义一个文件是否存在，如果不存在运行相应命令；如果存在跳过此步骤<br>- name: Run the command if the specified file does not exist.</p>
<p>command: /usr/bin/make_database.sh arg1 arg2 creates=/path/to/database</p>


</td>


</tr>
<tr>
<td valign="top" width="158">
<p>free_form</p>


</td>
<td valign="top" width="554">
<p>命令模块采用自由形式命令运行；即可以输入任意linux命令</p>


</td>


</tr>
<tr>
<td valign="top" width="158">
<p>removes<br>(added in 1.5)</p>


</td>
<td valign="top" width="554">
<p>定义一个文件是否存在，如果存在运行相应命令；如果不存在跳过此步骤</p>


</td>


</tr>


</tbody>


</table>
<p>&nbsp;实例：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;c2561a33-e9bc-4cf0-8447-58e226e4d7ff&#39;)"><img id="code_img_closed_c2561a33-e9bc-4cf0-8447-58e226e4d7ff" class="code_img_closed" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ContractedBlock.gif" alt=""><img id="code_img_opened_c2561a33-e9bc-4cf0-8447-58e226e4d7ff" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;c2561a33-e9bc-4cf0-8447-58e226e4d7ff&#39;,event)" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_c2561a33-e9bc-4cf0-8447-58e226e4d7ff" class="cnblogs_code_hide">
<pre>[root@m01 scripts]# ansible name -m script -a <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/name.sh</span><span style="color: #800000;">"</span>
<span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.21</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">rc</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">stderr</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">Shared connection to 172.16.1.21 closed.\r\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">stdout</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">nfs01\r\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">stdout_lines</span><span style="color: #800000;">"</span><span style="color: #000000;">: [
        </span><span style="color: #800000;">"</span><span style="color: #800000;">nfs01</span><span style="color: #800000;">"</span><span style="color: #000000;">
    ]
}
</span><span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.11</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">rc</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">stderr</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">Shared connection to 172.16.1.11 closed.\r\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">stdout</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">backup\r\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">stdout_lines</span><span style="color: #800000;">"</span><span style="color: #000000;">: [
        </span><span style="color: #800000;">"</span><span style="color: #800000;">backup</span><span style="color: #800000;">"</span><span style="color: #000000;">
    ]
}
说明：不需要将脚本传输到远程节点上，脚本本身不用进行授权，即可利用script模块批量执行脚本</span></pre>
</div>
<span class="cnblogs_code_collapse">远程执行脚本</span></div>
<h3>copy模块</h3>
<p>将本地数据传输到远端，或者将远程节点上的数据进行移动</p>
<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="177">
<p align="center">选项参数</p>
</td>
<td valign="top" width="535">
<p align="center">选项说明</p>
</td>
</tr>
<tr>
<td valign="top" width="177">
<p>backup (重要参数）</p>
</td>
<td valign="top" width="535">
<p>创建备份文件包含时间戳信息，以便能够还原回原文件，在某种情况原文件被覆盖错误时。</p>
</td>
</tr>
<tr>
<td valign="top" width="177">
<p>content</p>
</td>
<td valign="top" width="535">
<p>当使用代替src参数时，将文件的内容直接设置为指定值。远端创建有指定内容文这是只是简单值，对于任何复杂或者有格式化的内容，请切换到template模块</p>
</td>
</tr>
<tr>
<td valign="top" width="177">
<p>dest</p>
</td>
<td valign="top" width="535">
<p>文件应该被拷贝到的远程绝对路径信息。如果src是一个目录，dest也必须是目录</p>
</td>
</tr>
<tr>
<td valign="top" width="177">
<p>directory_mode<br>(added in 1.5)</p>


</td>
<td valign="top" width="535">
<p>当递归复制设置目录权限时，如果没有设置权限，将使用系统默认这个权限值设置在目录上只对于最近创建的，并且对于已经存在的没有效果</p>


</td>


</tr>
<tr>
<td valign="top" width="177">
<p>force</p>


</td>
<td valign="top" width="535">
<p>默认为yes，当远程文件内容和源文件内容不同时，将覆盖目标文件如果为no，文件将只被传输，在目标主机不存在此文件时</p>
<p>别名：thirsty</p>


</td>


</tr>
<tr>
<td valign="top" width="177">
<p>group</p>


</td>
<td valign="top" width="535">
<p>定义所拥有文件/目录的所属组名称，类似交由chown命令进行处理</p>


</td>


</tr>
<tr>
<td valign="top" width="177">
<p>mode</p>


</td>
<td valign="top" width="535">
<p>定义文件或目录的权限信息；就像使用/usr/bin/chmod 设定八进制数（如0644）取消掉前导零可能会有意想不到的结果。作为1,8版本，可以指定为符号模式（如 u+rwx or u=rw，g=r，o=r）</p>


</td>


</tr>
<tr>
<td valign="top" width="177">
<p>owner</p>


</td>
<td valign="top" width="535">
<p>定义所拥有文件/目录的所属用户名称，类似交由chown命令进行处理</p>


</td>


</tr>
<tr>
<td valign="top" width="177">
<p>src</p>


</td>
<td valign="top" width="535">
<p>本地路径文件复制到远程服务器；可以是绝对路径也可以是相对路径如果路径是一个目录，将会递归复制。在这种情况下,如果路径以“/”结束,只将在该目录的内容复制到目的地否则,如果它不以“/”结束，目录和目录下所有内容都会被复制以上这种复制方式类似于rsync</p>


</td>


</tr>
<tr>
<td valign="top" width="177">
<p>remote_src</p>


</td>
<td valign="top" width="535">
<p>如果这个值设置为True，将到远程目标主机的机器上搜索</p>


</td>


</tr>
<tr>
<td valign="top" width="177">
<p>validate</p>


</td>
<td valign="top" width="535">
<p>在文件复制到相应目录位置之前，运行验证命令要验证的文件的路径通过%s传递，并且要在下面的例子中显示</p>


</td>


</tr>


</tbody>


</table>
<p>实例：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;c4cde3bd-4287-4a3b-a2c6-31cdb9456be5&#39;)"><img id="code_img_closed_c4cde3bd-4287-4a3b-a2c6-31cdb9456be5" class="code_img_closed" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ContractedBlock.gif" alt=""><img id="code_img_opened_c4cde3bd-4287-4a3b-a2c6-31cdb9456be5" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;c4cde3bd-4287-4a3b-a2c6-31cdb9456be5&#39;,event)" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_c4cde3bd-4287-4a3b-a2c6-31cdb9456be5" class="cnblogs_code_hide">
<pre>[root@m01 scripts]# ansible name -m copy -a <span style="color: #800000;">"</span><span style="color: #800000;">src=/etc/hosts dest=/tmp/ mode=0777</span><span style="color: #800000;">"</span> 
<span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.21</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">checksum</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">da5234fc498b2c3bf8b98f6b08fe1d6d96e653c2</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">dest</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/hosts</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">gid</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">group</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">md5sum</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">2253445a36ed3910d50887a6eb1e4b79</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">mode</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">0777</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">owner</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">size</span><span style="color: #800000;">"</span>: <span style="color: #800080;">393</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">src</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/root/.ansible/tmp/ansible-tmp-1508394462.54-228657061248374/source</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">state</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">file</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">uid</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">
}
</span><span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.11</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">checksum</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">da5234fc498b2c3bf8b98f6b08fe1d6d96e653c2</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">dest</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/hosts</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">gid</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">group</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">md5sum</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">2253445a36ed3910d50887a6eb1e4b79</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">mode</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">0777</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">owner</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">size</span><span style="color: #800000;">"</span>: <span style="color: #800080;">393</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">src</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/root/.ansible/tmp/ansible-tmp-1508394462.62-205181338927486/source</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">state</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">file</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">uid</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">
}   </span></pre>
</div>
<span class="cnblogs_code_collapse">拷贝文件</span></div>
<div>
<p class="a">说明：</p>
<p class="a">1. 如果指定的目标目录不存在，系统会自动创建，否则源目录会放到目标目录下面去</p>
<p class="a">2. 如果copy的是文件，dest指定的名字和源如果不同，并且它不是已经存在的目录，相当于copy过去后在重命名；</p>
<p class="a">3. 如果dest是目标机器上已经存在的目录，则会直接把文件copy到该目录下面。</p>
<p class="a">4. 设定的用户和组oldboy在所有客户端必须存在</p>
</div>
<p>&nbsp;给文件加内容：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;7f03125b-e204-405a-8ca7-fdb1914d9899&#39;)"><img id="code_img_closed_7f03125b-e204-405a-8ca7-fdb1914d9899" class="code_img_closed" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ContractedBlock.gif" alt=""><img id="code_img_opened_7f03125b-e204-405a-8ca7-fdb1914d9899" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;7f03125b-e204-405a-8ca7-fdb1914d9899&#39;,event)" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_7f03125b-e204-405a-8ca7-fdb1914d9899" class="cnblogs_code_hide">
<pre>[root@m01 scripts]# ansible name -m copy -a <span style="color: #800000;">"</span><span style="color: #800000;">content=lyq.com\n dest=/tmp/1</span><span style="color: #800000;">"</span>
<span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.11</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">checksum</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">31f9b45eca1a36069a4517868a948b369228aa75</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">dest</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/1</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">gid</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">group</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">md5sum</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">ae41cc8f2c5a90e7e94b1d9f6616a916</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">mode</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">0644</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">owner</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">size</span><span style="color: #800000;">"</span>: <span style="color: #800080;">7</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">src</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/root/.ansible/tmp/ansible-tmp-1508465641.79-151255543511039/source</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">state</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">file</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">uid</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">
}
</span><span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.21</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">checksum</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">31f9b45eca1a36069a4517868a948b369228aa75</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">dest</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/1</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">gid</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">group</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">md5sum</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">ae41cc8f2c5a90e7e94b1d9f6616a916</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">mode</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">0644</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">owner</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">size</span><span style="color: #800000;">"</span>: <span style="color: #800080;">7</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">src</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/root/.ansible/tmp/ansible-tmp-1508465641.82-210493742853029/source</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">state</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">file</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">uid</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">
}</span></pre>
</div>
<span class="cnblogs_code_collapse">加内容</span></div>
<h3>file模块</h3>
<p>设置文件属性</p>
<p>&nbsp;</p>
<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="168">
<p align="center">参数</p>
</td>
<td valign="top" width="544">
<p align="center">说明</p>
</td>
</tr>
<tr>
<td valign="top" width="168">
<p>force</p>
</td>
<td valign="top" width="544">
<p>强行创建符号链接的两种情况：</p>
<p>源文件不存在（但是日后会出现）</p>
<p>目标存在并且是一个文件（因此，我们需要将“路径”文件取消，并创建“src”文件的符号链接）</p>
</td>
</tr>
<tr>
<td valign="top" width="168">
<p>group</p>
</td>
<td valign="top" width="544">
<p>定义所拥有文件/目录的所属组名称，类似交由chown命令进行处理</p>
</td>
</tr>
<tr>
<td valign="top" width="168">
<p>mode</p>
</td>
<td valign="top" width="544">
<p>定义文件或目录的权限信息；就像使用/usr/bin/chmod 设定八进制数（如0644）取消掉前导零可能会有意想不到的结果。作为1,8版本，可以指定为符号模式（如 u+rwx or u=rw，g=r，o=r）</p>
</td>
</tr>
<tr>
<td valign="top" width="168">
<p>owner</p>
</td>
<td valign="top" width="544">
<p>定义所拥有文件/目录的所属用户名称，类似交由chown命令进行处理</p>
</td>
</tr>
<tr>
<td valign="top" width="168">
<p>path</p>
</td>
<td valign="top" width="544">
<p>文件路径管理：</p>
<p>别名方式：dest,name</p>
</td>
</tr>
<tr>
<td valign="top" width="168">
<p>recurse</p>
</td>
<td valign="top" width="544">
<p>递归设置指定文件属性（这个参数值应用对于state=directory）</p>
</td>
</tr>
<tr>
<td valign="top" width="168">
<p>src</p>
</td>
<td valign="top" width="544">
<p>要链接的文件路径(只能应用 state=link)，接受绝对 相对以及不存在的路径相对路径不能扩展</p>
</td>
</tr>
<tr>
<td valign="top" width="168">
<p>state</p>
<p>(重要参数)</p>
</td>
<td valign="top" width="544">
<p>如果指定参数为directory<br># 所有不存在的子目录将会被创建，并且从1.7开始支持设置目录权限<br>如果指定参数为file<br># 如果文件不存在将不能被创建，如果想创建可以参考copy和template模块<br>如果指定参数为link<br># 符号链接将被创建或更改。<br>如果指定参数为hard<br># 便会创建出硬链接<br>如果指定参数为absent<br># 目录将被递归删除以及文件，而链接将被取消链接。<br># 请注意,定义文件不存在不会失败，只是输出没有发生任何改变的结果<br>如果指定参数为touch<br># 如果路径不存在将创建一个空文件，如果文件或目录存在将接收更新的文件访问和修改时间（类似于“touch”从命令行工作的方式）。</p>


</td>


</tr>


</tbody>


</table>
<p>实例：</p>
<p>创建目录/删除目录</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;6caa9df3-00cf-4f17-9e8f-12fef1e03181&#39;)"><img id="code_img_closed_6caa9df3-00cf-4f17-9e8f-12fef1e03181" class="code_img_closed" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ContractedBlock.gif" alt=""><img id="code_img_opened_6caa9df3-00cf-4f17-9e8f-12fef1e03181" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;6caa9df3-00cf-4f17-9e8f-12fef1e03181&#39;,event)" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_6caa9df3-00cf-4f17-9e8f-12fef1e03181" class="cnblogs_code_hide">
<pre>[root@m01 scripts]# ansible name -m <span style="color: #0000ff;">file</span> -a <span style="color: #800000;">"</span><span style="color: #800000;">dest=/tmp/lyq_dir state=directory</span><span style="color: #800000;">"</span>
<span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.11</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">gid</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">group</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">mode</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">0755</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">owner</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">path</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/oldboy_dir</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">size</span><span style="color: #800000;">"</span>: <span style="color: #800080;">4096</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">state</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">directory</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">uid</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">
}
</span><span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.21</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">gid</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">group</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">mode</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">0755</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">owner</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">path</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/oldboy_dir</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">size</span><span style="color: #800000;">"</span>: <span style="color: #800080;">4096</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">state</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">directory</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">uid</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">
}
[root@m01 scripts]# ansible name </span>-m <span style="color: #0000ff;">file</span> -a <span style="color: #800000;">"</span><span style="color: #800000;">dest=/tmp/lyq_dir state=absent</span><span style="color: #800000;">"</span>
<span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.11</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">path</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/oldboy_dir</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">state</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">absent</span><span style="color: #800000;">"</span><span style="color: #000000;">
}
</span><span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.21</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">path</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/oldboy_dir</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">state</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">absent</span><span style="color: #800000;">"</span><span style="color: #000000;">
}</span></pre>
</div>
<span class="cnblogs_code_collapse">创建/删除目录</span></div>
<p>创建文件/删除文件</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;0e6a0d95-a5b9-4643-81a6-b41d328f08f1&#39;)"><img id="code_img_closed_0e6a0d95-a5b9-4643-81a6-b41d328f08f1" class="code_img_closed" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ContractedBlock.gif" alt=""><img id="code_img_opened_0e6a0d95-a5b9-4643-81a6-b41d328f08f1" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;0e6a0d95-a5b9-4643-81a6-b41d328f08f1&#39;,event)" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_0e6a0d95-a5b9-4643-81a6-b41d328f08f1" class="cnblogs_code_hide">
<pre>[root@m01 scripts]# ansible name -m <span style="color: #0000ff;">file</span> -a <span style="color: #800000;">"</span><span style="color: #800000;">dest=/tmp/lyq_file state=touch</span><span style="color: #800000;">"</span>
<span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.11</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">dest</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/oldboy_file</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">gid</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">group</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">mode</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">0644</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">owner</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">size</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">state</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">file</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">uid</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">
}
</span><span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.21</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">dest</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/oldboy_file</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">gid</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">group</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">mode</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">0644</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">owner</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">size</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">state</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">file</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">uid</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">
}
[root@m01 scripts]# ansible name </span>-m <span style="color: #0000ff;">file</span> -a <span style="color: #800000;">"</span><span style="color: #800000;">dest=/tmp/lyq_file state=absent</span><span style="color: #800000;">"</span>
<span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.11</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">path</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/oldboy_file</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">state</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">absent</span><span style="color: #800000;">"</span><span style="color: #000000;">
}
</span><span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.21</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">path</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/oldboy_file</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">state</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">absent</span><span style="color: #800000;">"</span><span style="color: #000000;">
}</span></pre>
</div>
<span class="cnblogs_code_collapse">创建/删除文件</span></div>
<p>创建软连接/删除软连接</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;1a7ff990-9a0f-4b62-9872-b203d9e4e99d&#39;)"><img id="code_img_closed_1a7ff990-9a0f-4b62-9872-b203d9e4e99d" class="code_img_closed" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ContractedBlock.gif" alt=""><img id="code_img_opened_1a7ff990-9a0f-4b62-9872-b203d9e4e99d" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;1a7ff990-9a0f-4b62-9872-b203d9e4e99d&#39;,event)" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_1a7ff990-9a0f-4b62-9872-b203d9e4e99d" class="cnblogs_code_hide">
<pre>[root@m01 scripts]# ansible name -m <span style="color: #0000ff;">file</span> -a <span style="color: #800000;">"</span><span style="color: #800000;">src=/tmp/lyq_file dest=/tmp/lyq_file_link state=link</span><span style="color: #800000;">"</span>
<span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.11</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">dest</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/oldboy_file_link</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">gid</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">group</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">mode</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">0777</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">owner</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">size</span><span style="color: #800000;">"</span>: <span style="color: #800080;">16</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">src</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/oldboy_file</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">state</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">link</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">uid</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">
}
</span><span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.21</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">dest</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/oldboy_file_link</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">gid</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">group</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">mode</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">0777</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">owner</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">size</span><span style="color: #800000;">"</span>: <span style="color: #800080;">16</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">src</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/oldboy_file</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">state</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">link</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">uid</span><span style="color: #800000;">"</span>: <span style="color: #800080;">0</span><span style="color: #000000;">
}
[root@m01 scripts]# ansible name </span>-m <span style="color: #0000ff;">file</span> -a <span style="color: #800000;">"</span><span style="color: #800000;">dest=/tmp/lyq_file_link state=absent</span><span style="color: #800000;">"</span>
<span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.21</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">path</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/oldboy_file_link</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">state</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">absent</span><span style="color: #800000;">"</span><span style="color: #000000;">
}
</span><span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.11</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">path</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/oldboy_file_link</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">state</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">absent</span><span style="color: #800000;">"</span><span style="color: #000000;">
}</span></pre>
</div>
<span class="cnblogs_code_collapse">创建/删除软连接</span></div>
<div>
<h3>fetch模块</h3>
<p>将远程主机上的文件，拉取到本地</p>
<p>&nbsp;</p>
<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="168">
<p align="center">参数</p>
</td>
<td valign="top" width="544">
<p align="center">说明</p>
</td>
</tr>
<tr>
<td valign="top" width="168">
<p>dest</p>
</td>
<td valign="top" width="544">
<p>定义一个保存文件的目录（将远程主机拉去过来的文件保存在本地的路径信息）</p>
</td>
</tr>
<tr>
<td valign="top" width="168">
<p>src</p>
</td>
<td valign="top" width="544">
<p>指定从远程主机要拉取的文件信息</p>
</td>
</tr>
<tr>
<td valign="top" width="168">
<p>flat</p>
</td>
<td valign="top" width="544">
<p>默认设置为no，如果设置为yes，将不显示路径信息</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>&nbsp;实例：</p>
<p>从远程主机拉取文件</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;a62d22fa-51e2-487d-b7db-377adda6f9dc&#39;)"><img id="code_img_closed_a62d22fa-51e2-487d-b7db-377adda6f9dc" class="code_img_closed" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ContractedBlock.gif" alt=""><img id="code_img_opened_a62d22fa-51e2-487d-b7db-377adda6f9dc" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;a62d22fa-51e2-487d-b7db-377adda6f9dc&#39;,event)" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_a62d22fa-51e2-487d-b7db-377adda6f9dc" class="cnblogs_code_hide">
<pre>[root@m01 scripts]# ansible name -m fetch -a <span style="color: #800000;">"</span><span style="color: #800000;">dest=/tmp src=/tmp/1</span><span style="color: #800000;">"</span>
<span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.11</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">checksum</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">31f9b45eca1a36069a4517868a948b369228aa75</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">dest</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/172.16.1.11/tmp/1</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">md5sum</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">ae41cc8f2c5a90e7e94b1d9f6616a916</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">remote_checksum</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">31f9b45eca1a36069a4517868a948b369228aa75</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">remote_md5sum</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">null</span><span style="color: #000000;">
}
</span><span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.21</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">checksum</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">31f9b45eca1a36069a4517868a948b369228aa75</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">dest</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/172.16.1.21/tmp/1</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">md5sum</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">ae41cc8f2c5a90e7e94b1d9f6616a916</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">remote_checksum</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">31f9b45eca1a36069a4517868a948b369228aa75</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">remote_md5sum</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">null</span><span style="color: #000000;">
}</span></pre>
</div>
<span class="cnblogs_code_collapse">远程拉取</span></div>
<p>flat&nbsp; 默认设置为no，如果设置为yes，将不显示路径信息</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;e11262e7-252d-4a5f-84a8-a5c9fda75f0c&#39;)"><img id="code_img_closed_e11262e7-252d-4a5f-84a8-a5c9fda75f0c" class="code_img_closed" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ContractedBlock.gif" alt=""><img id="code_img_opened_e11262e7-252d-4a5f-84a8-a5c9fda75f0c" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;e11262e7-252d-4a5f-84a8-a5c9fda75f0c&#39;,event)" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_e11262e7-252d-4a5f-84a8-a5c9fda75f0c" class="cnblogs_code_hide">
<pre>[root@m01 scripts]# ansible name -m fetch -a <span style="color: #800000;">"</span><span style="color: #800000;">dest=/tmp/ src=/tmp/1 flat=yes</span><span style="color: #800000;">"</span>
<span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.21</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">checksum</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">31f9b45eca1a36069a4517868a948b369228aa75</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">dest</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/1</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">md5sum</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">ae41cc8f2c5a90e7e94b1d9f6616a916</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">remote_checksum</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">31f9b45eca1a36069a4517868a948b369228aa75</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">remote_md5sum</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">null</span><span style="color: #000000;">
}
</span><span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.11</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">checksum</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">31f9b45eca1a36069a4517868a948b369228aa75</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">dest</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/tmp/1</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">md5sum</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">ae41cc8f2c5a90e7e94b1d9f6616a916</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">remote_checksum</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">31f9b45eca1a36069a4517868a948b369228aa75</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">remote_md5sum</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">null</span><span style="color: #000000;">
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<h3>mount模块</h3>
<p>控制激活和配置挂载点模块</p>
<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="168">
<p align="center">参数</p>
</td>
<td valign="top" width="544">
<p align="center">说明</p>
</td>
</tr>
<tr>
<td valign="top" width="168">
<p>fstype</p>
</td>
<td valign="top" width="544">
<p>指定挂载文件类型</p>
</td>
</tr>
<tr>
<td valign="top" width="168">
<p>path</p>
</td>
<td valign="top" width="544">
<p>指定挂载点</p>
</td>
</tr>
<tr>
<td valign="top" width="168">
<p>opts</p>
</td>
<td valign="top" width="544">
<p>设定挂载的参数选项信息</p>
</td>
</tr>
<tr>
<td valign="top" width="168">
<p>src</p>
</td>
<td valign="top" width="544">
<p>要被挂载的目录设备信息（共享目录）</p>
</td>
</tr>
<tr>
<td valign="top" width="168">
<p>boot<br>(added in 2.2)</p>


</td>
<td valign="top" width="544">
<p>确定是否在启动时文件系统被挂载<br>只应用在solaris系统上</p>


</td>


</tr>
<tr>
<td valign="top" width="168">
<p>dump</p>


</td>
<td valign="top" width="544">
<p>Dump(参见 fstab5)。注意如果设置为null或状态设置为present，它将停止工作，并将在随后的运行中复制条目<br>对solaris系统没有效果</p>


</td>


</tr>
<tr>
<td valign="top" width="168">
<p>state</p>


</td>
<td valign="top" width="544">
<p>如果为mounted在fstab文件中的设备将被激活挂载和适当配置</p>
<p># 如果为unmounted设备将被卸载并不会改变fstab文件信息bsent和present只处理fstab，但不影响目前的挂载</p>


</td>


</tr>


</tbody>


</table>
<h3>&nbsp;cron模块</h3>
<p>定时任务模块</p>
<p>&nbsp;</p>
<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="262">
<p align="center">参数</p>


</td>
<td valign="top" width="450">
<p align="center">说明</p>


</td>


</tr>
<tr>
<td valign="top" width="262">
<p>minute</p>


</td>
<td valign="top" width="450">
<p>分</p>


</td>


</tr>
<tr>
<td valign="top" width="262">
<p>hour</p>


</td>
<td valign="top" width="450">
<p>时</p>


</td>


</tr>
<tr>
<td valign="top" width="262">
<p>day</p>


</td>
<td valign="top" width="450">
<p>日</p>


</td>


</tr>
<tr>
<td valign="top" width="262">
<p>month</p>


</td>
<td valign="top" width="450">
<p>月</p>


</td>


</tr>
<tr>
<td valign="top" width="262">
<p>weekday</p>


</td>
<td valign="top" width="450">
<p>周</p>


</td>


</tr>
<tr>
<td valign="top" width="262">
<p>job</p>


</td>
<td valign="top" width="450">
<p>定时任务中要执行的操作</p>


</td>


</tr>
<tr>
<td valign="top" width="262">
<p>name</p>


</td>
<td valign="top" width="450">
<p>定义定时任务的描述信息</p>


</td>


</tr>
<tr>
<td valign="top" width="262">
<p>state=absent</p>


</td>
<td valign="top" width="450">
<p>删除定时任务</p>


</td>


</tr>
<tr>
<td valign="top" width="262">
<p>disabled</p>


</td>
<td valign="top" width="450">
<p>注释定时任务</p>


</td>


</tr>


</tbody>


</table>
<p>实例：</p>
<p>创建定时任务</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;04b7d968-e0b2-4253-a4b4-a2208eee5a8f&#39;)"><img id="code_img_closed_04b7d968-e0b2-4253-a4b4-a2208eee5a8f" class="code_img_closed" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ContractedBlock.gif" alt=""><img id="code_img_opened_04b7d968-e0b2-4253-a4b4-a2208eee5a8f" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;04b7d968-e0b2-4253-a4b4-a2208eee5a8f&#39;,event)" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_04b7d968-e0b2-4253-a4b4-a2208eee5a8f" class="cnblogs_code_hide">
<pre>[root@m01 ~]# ansible name -m cron -a <span style="color: #800000;">"</span><span style="color: #800000;">minute=0 hour=0 job='/bin/sh /tmp/name.sh &gt;/dev/null'</span><span style="color: #800000;">"</span> 
<span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.21</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">envs</span><span style="color: #800000;">"</span><span style="color: #000000;">: [], 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">jobs</span><span style="color: #800000;">"</span><span style="color: #000000;">: [
        </span><span style="color: #800000;">"</span><span style="color: #800000;">None</span><span style="color: #800000;">"</span><span style="color: #000000;">
    ]
}
</span><span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.11</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">envs</span><span style="color: #800000;">"</span><span style="color: #000000;">: [], 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">jobs</span><span style="color: #800000;">"</span><span style="color: #000000;">: [
        </span><span style="color: #800000;">"</span><span style="color: #800000;">None</span><span style="color: #800000;">"</span><span style="color: #000000;">
    ]
}</span></pre>
</div>
<span class="cnblogs_code_collapse">创建定时任务</span></div>
<p>删除定时任务</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;f6c823da-449f-4255-b9e3-f396eaf67ebf&#39;)"><img id="code_img_closed_f6c823da-449f-4255-b9e3-f396eaf67ebf" class="code_img_closed" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ContractedBlock.gif" alt=""><img id="code_img_opened_f6c823da-449f-4255-b9e3-f396eaf67ebf" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;f6c823da-449f-4255-b9e3-f396eaf67ebf&#39;,event)" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_f6c823da-449f-4255-b9e3-f396eaf67ebf" class="cnblogs_code_hide">
<pre>[root@m01 ~]# ansible name -m cron -a <span style="color: #800000;">"</span><span style="color: #800000;">minute=0 hour=0 job='/bin/sh /tmp/name.sh &gt;/dev/null' state=absent</span><span style="color: #800000;">"</span></pre>
</div>
<span class="cnblogs_code_collapse">删除定时任务</span></div>
<p>注释定时任务</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;2ab445a7-3fed-4d1e-a663-8a5e6a9a55c0&#39;)"><img id="code_img_closed_2ab445a7-3fed-4d1e-a663-8a5e6a9a55c0" class="code_img_closed" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ContractedBlock.gif" alt=""><img id="code_img_opened_2ab445a7-3fed-4d1e-a663-8a5e6a9a55c0" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;2ab445a7-3fed-4d1e-a663-8a5e6a9a55c0&#39;,event)" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_2ab445a7-3fed-4d1e-a663-8a5e6a9a55c0" class="cnblogs_code_hide">
<pre>[root@m01 ~]# ansible name -m cron -a <span style="color: #800000;">"</span><span style="color: #800000;">minute=0 hour=0 job='/bin/sh /tmp/name.sh &gt;/dev/null' state=disabled</span><span style="color: #800000;">"</span></pre>
</div>
<span class="cnblogs_code_collapse">注释定时任务</span></div>
<h3>user模块</h3>
<p>管理用户账户</p>
<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="187">
<p align="center">参数</p>
</td>
<td valign="top" width="525">
<p align="center">说明</p>
</td>
</tr>
<tr>
<td valign="top" width="187">
<p>append</p>
</td>
<td valign="top" width="525">
<p>如果为yes，将只添加组，而不是将它们设置为组中的列表</p>
</td>
</tr>
<tr>
<td valign="top" width="187">
<p>name</p>
</td>
<td valign="top" width="525">
<p>要操作的用户名称</p>
</td>
</tr>
<tr>
<td valign="top" width="187">
<p>shell</p>
</td>
<td valign="top" width="525">
<p>指定用户的使用命令路径（如：/bin/bash）</p>
</td>
</tr>
<tr>
<td valign="top" width="187">
<p>comment</p>
</td>
<td valign="top" width="525">
<p>可选设置用户账号描述信息（又称为 GECOS）</p>
</td>
</tr>
<tr>
<td valign="top" width="187">
<p>createhome</p>
</td>
<td valign="top" width="525">
<p>除非设置为no，否则当创建账户或不存在主目录时，将为用户创建一个主目录</p>
</td>
</tr>
<tr>
<td valign="top" width="187">
<p>user</p>
</td>
<td valign="top" width="525">
<p>创建，移除或修改的用户名称信息<br>别名：user</p>


</td>


</tr>
<tr>
<td valign="top" width="187">
<p>uid</p>


</td>
<td valign="top" width="525">
<p>可选设置用户UID信息</p>


</td>


</tr>


</tbody>


</table>
<p>&nbsp;实例：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;4db6cd93-0881-4268-8837-96c9b39bb782&#39;)"><img id="code_img_closed_4db6cd93-0881-4268-8837-96c9b39bb782" class="code_img_closed" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ContractedBlock.gif" alt=""><img id="code_img_opened_4db6cd93-0881-4268-8837-96c9b39bb782" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;4db6cd93-0881-4268-8837-96c9b39bb782&#39;,event)" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_4db6cd93-0881-4268-8837-96c9b39bb782" class="cnblogs_code_hide">
<pre>[root@m01 ansible-playbook]# ansible <span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.1</span> -m user -a <span style="color: #800000;">"</span><span style="color: #800000;">user=lyq uid=2222</span><span style="color: #800000;">"</span>
<span style="color: #800080;">172.16</span>.<span style="color: #800080;">1.1</span> | SUCCESS =&gt;<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">append</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">false</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">changed</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">true</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">comment</span><span style="color: #800000;">"</span>: <span style="color: #800000;">""</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">group</span><span style="color: #800000;">"</span>: <span style="color: #800080;">500</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">home</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/home/lyq</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">move_home</span><span style="color: #800000;">"</span>: <span style="color: #0000ff;">false</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">lyq</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">shell</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">/bin/bash</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">state</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">present</span><span style="color: #800000;">"</span><span style="color: #000000;">, 
    </span><span style="color: #800000;">"</span><span style="color: #800000;">uid</span><span style="color: #800000;">"</span>: <span style="color: #800080;">2222</span><span style="color: #000000;">
}</span></pre>
</div>
<span class="cnblogs_code_collapse">创建用户</span></div>
<h2>ansible剧本</h2>
<p>&nbsp;检查剧本：</p>
<div>
<p class="a">ansible-playbook --syntax-check 剧本名 &nbsp; &nbsp;----进行剧本配置信息语法检查</p>
<p class="a">ansible-playbook -C 剧本名 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;----模拟剧本执行</p>
</div>
<h3>ansible核心功能</h3>
<ul>
<li>pyYAML&nbsp; -----用于ansible编写剧本所使用的语言格式</li>
<li>paramiko ---远程连接与数据传输</li>
<li>Jinja2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -----用于编写ansible的模块信息</li>
</ul>
<h3>ansible剧本编写规则</h3>
<p>pyYAML语法规则</p>
<p>一：缩进</p>
<p>yaml使用一个固定的缩进风格表示数据层结构关系，Saltstack需要每个缩进级别由两个空格组成。一定不能使用tab键（tab在vim编辑中是8个空格）</p>
<p>二：冒号</p>
<p>每个冒号后面一定要有一个空格（以冒号结尾不需要空格，表示文件路径的模版可以不需要空格）</p>
<p>三：短横线</p>
<ul>
<li>想要表示列表项，使用一个短横杠加一个空格。多个项使用同样的缩进级别作为同一个列表的一部分。</li>
<li>核心规则：有效的利用空格进行剧本的编写，剧本编写是不支持tab的。</li>
</ul>
<h3>ansible-playbook编写格式</h3>
<p>剧本开头，可以不写</p>
<p>这两项必须要写：</p>
<div class="cnblogs_code">
<pre>- hosts:（空格）all   处理所有服务器，找到所有服务器
  tasks:            剧本要干的事</pre>
</div>
<h4>检查剧本命令</h4>
<div class="cnblogs_code">
<pre>ansible-playbook --syntax-check 剧本   ----进行剧本配置信息语法检查
ansible-playbook -C 剧本               ----模拟剧本执行</pre>
</div>
<h3>剧本实例</h3>
<p>rsync一键部署剧本：</p>
<p>- name: 后面是可以加入提示信息的</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码"><img src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>[root@m01 ansible-playbook]# vim rsync.yml
- hosts: 172.16.1.21
  tasks:
    - name:
      yum: name=rsync state=installed
    - name:
      copy: src=/tmp/rsyncd.conf dest=/etc/
    - name:
      shell: userdel -r rsync &amp;&amp; useradd rsync -M -s /sbin/nologin
    - name:
      shell: mkdir -p /backup/ &amp;&amp; chown rsync.rsync /backup
    - name:
      copy: src=/tmp/rsync.password dest=/etc/
    - name:
      shell: rsync --daemon creates=/var/run/rsyncd.pid
- hosts: 172.16.1.11
  tasks:
    - name:
      copy: content=lyq123 dest=/etc/rsync.password</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码"><img src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>写的不好的地方，请大家多多包涵</p>
<p>&nbsp;</p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag">标签: <a href="https://www.cnblogs.com/2lianzhang/tag/Linux%E4%B8%ADansible%E6%89%B9%E9%87%8F%E7%AE%A1%E7%90%86%E8%BD%AF%E4%BB%B6%E9%83%A8%E7%BD%B2%E5%8F%8A%E5%89%A7%E6%9C%AC%E7%BC%96%E5%86%99/">Linux中ansible批量管理软件部署及剧本编写</a></div>
<div id="blog_post_info"><div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(8058762,cb_blogId,1);green_channel_success(this,&#39;谢谢推荐！&#39;);">好文要顶</a>
            <a id="green_channel_follow" onclick="follow(&#39;2f724bc2-b6a0-4d8b-fc19-08d52f269005&#39;);" href="javascript:void(0);">关注我</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/icon_weibo_24.png" alt=""></a>
    <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareOnWechat()"><img src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/wechat.png" alt=""></a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
            <a href="https://home.cnblogs.com/u/2lianzhang/" target="_blank"><img src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/20171217152412.png" class="author_avatar" alt=""></a>
        <div id="author_profile_detail" class="author_profile_info">
            <a href="https://home.cnblogs.com/u/2lianzhang/">为什么名字这么难</a><br>
            <a href="https://home.cnblogs.com/u/2lianzhang/followees">关注 - 1</a><br>
            <a href="https://home.cnblogs.com/u/2lianzhang/followers">粉丝 - 4</a>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow">
                <a href="javascript:void(0);" onclick="follow(&#39;2f724bc2-b6a0-4d8b-fc19-08d52f269005&#39;);return false;">+加关注</a>
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(8058762,&#39;Digg&#39;)">
        <span class="diggnum" id="digg_count">0</span>
    </div>
    <div class="buryit" onclick="votePost(8058762,&#39;Bury&#39;)">
        <span class="burynum" id="bury_count">0</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
</div>
<script type="text/javascript">
    currentDiggType = 0;
</script></div>
<div class="clear"></div>
<div id="post_next_prev"><a href="https://www.cnblogs.com/2lianzhang/p/8058661.html" class="p_n_p_prefix">« </a> 上一篇：<a href="https://www.cnblogs.com/2lianzhang/p/8058661.html" title="发布于2017-12-18 17:23">Linux中ssh介绍与ssh+key密钥登陆部署</a><br></div>
</div>


		</div>
		<div class="postDesc">posted @ <span id="post-date">2017-12-18 17:38</span> <a href="https://www.cnblogs.com/2lianzhang/">为什么名字这么难</a> 阅读(<span id="post_view_count">625</span>) 评论(<span id="post_comment_count">0</span>)  <a href="https://i.cnblogs.com/EditPosts.aspx?postid=8058762" rel="nofollow">编辑</a> <a href="https://www.cnblogs.com/2lianzhang/p/8058762.html#" onclick="AddToWz(8058762);return false;">收藏</a></div>
	</div>
	<script type="text/javascript">var allowComments=true,cb_blogId=401912,cb_entryId=8058762,cb_blogApp=currentBlogApp,cb_blogUserGuid='2f724bc2-b6a0-4d8b-fc19-08d52f269005',cb_entryCreatedDate='2017/12/18 17:38:00';loadViewCount(cb_entryId);var cb_postType=1;var isMarkdown=false;</script>
	
</div><!--end: topics 文章、评论容器-->
</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="https://www.cnblogs.com/2lianzhang/p/8058762.html#" onclick="return RefreshPage();">刷新页面</a><a href="https://www.cnblogs.com/2lianzhang/p/8058762.html#top">返回顶部</a></div>
<div id="comment_form_container"><div class="login_tips">注册用户登录后才能发表评论，请 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return login(&#39;commentform&#39;);">登录</a> 或 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return register();">注册</a>，<a href="http://www.cnblogs.com/">访问</a>网站首页。</div></div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="ad_t2"><a href="http://www.ucancode.com/index.htm" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-工控&#39;)">【推荐】超50万C++/C#源码: 大型实时仿真组态图形源码</a><br><a href="https://www.grapecity.com.cn/developer/spreadjs?utm_source=cnblogs&amp;utm_medium=blogpage&amp;utm_term=bottom&amp;utm_content=SpreadJS&amp;utm_campaign=community" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-SpreadJS&#39;)">【前端】SpreadJS表格控件，可嵌入系统开发的在线Excel</a><br><a href="https://gitee.com/enterprises?from=bky-1" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-gitee&#39;)">【推荐】码云企业版，高效的企业级软件协作开发管理平台</a><br><a href="https://q.cnblogs.com/" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-博问&#39;)">【推荐】程序员问答平台，解决您开发中遇到的技术难题</a><br></div>
<div id="opt_under_post"></div>
<script async="async" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/gpt.js.下载"></script>
<script>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
</script>
<script>
  googletag.cmd.push(function() {
        googletag.defineSlot('/1090369/C1', [300, 250], 'div-gpt-ad-1546353474406-0').addService(googletag.pubads());
        googletag.defineSlot('/1090369/C2', [468, 60], 'div-gpt-ad-1539008685004-0').addService(googletag.pubads());
        googletag.pubads().enableSingleRequest();
        googletag.enableServices();
  });
</script>
<div id="cnblogs_c1" class="c_ad_block">
    <div id="div-gpt-ad-1546353474406-0" style="height:250px; width:300px;" data-google-query-id="CJG3yPOJi-MCFc-zlgod1-EH2A"><div id="google_ads_iframe_/1090369/C1_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/C1_0" title="3rd party ad content" name="google_ads_iframe_/1090369/C1_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border: 0px; vertical-align: bottom;" data-google-container-id="1" data-load-complete="true" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/saved_resource.html"></iframe></div></div>
</div>
<div id="under_post_news"><div class="recomm-block"><b>相关博文：</b><br>·  <a href="https://www.cnblogs.com/bo-ke/p/9970208.html" target="_blank" onclick="clickRecomItmem(9970208)">ansible简介，简单实用</a><br>·  <a href="https://www.cnblogs.com/bananaaa/p/8143345.html" target="_blank" onclick="clickRecomItmem(8143345)">ansible服务及剧本编写</a><br>·  <a href="https://www.cnblogs.com/stacks/p/8542126.html" target="_blank" onclick="clickRecomItmem(8542126)">ansible详解-常用模块</a><br>·  <a href="https://www.cnblogs.com/linux-xsj/p/7058800.html" target="_blank" onclick="clickRecomItmem(7058800)">运维自动化工具ansible（模块使用）</a><br>·  <a href="https://www.cnblogs.com/cheyunhua/p/8093360.html" target="_blank" onclick="clickRecomItmem(8093360)">Ansible安装部署及常用模块详解</a><br></div></div>
<div id="cnblogs_c2" class="c_ad_block">
    <div id="div-gpt-ad-1539008685004-0" style="height:60px; width:468px;" data-google-query-id="CJK3yPOJi-MCFc-zlgod1-EH2A"><div id="google_ads_iframe_/1090369/C2_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/C2_0" title="3rd party ad content" name="google_ads_iframe_/1090369/C2_0" width="468" height="60" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border: 0px; vertical-align: bottom;" data-google-container-id="2" data-load-complete="true" src="./Linux中ansible批量管理软件部署及剧本编写 - 为什么名字这么难 - 博客园_files/saved_resource(1).html"></iframe></div></div>
</div>
<div id="under_post_kb"><div class="itnews c_ad_block"><b>最新新闻</b>：<br> ·  <a href="https://news.cnblogs.com/n/627496/" target="_blank">清华创新架构芯片量产！全球首款可重构超低功耗语音AI芯片</a><br> ·  <a href="https://news.cnblogs.com/n/627495/" target="_blank">超越时空：从0维到10维</a><br> ·  <a href="https://news.cnblogs.com/n/627494/" target="_blank">欧盟罚佳能3200万美元：未批准就收购东芝医疗设备业务</a><br> ·  <a href="https://news.cnblogs.com/n/627493/" target="_blank">烧钱太快，报道称SpaceX正在寻求逾3亿美元新融资</a><br> ·  <a href="https://news.cnblogs.com/n/627492/" target="_blank">华为内部邮件曝光：从世界范围内招揽天才少年</a><br>» <a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">更多新闻...</a></div></div>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
 if(enablePostBottom()) {
    codeHighlight();
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverT2();
    deliverC1();
    deliverC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);  
}
</script>
</div>

    
	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<!--done-->
<div class="newsItem">
<h3 class="catListTitle">公告</h3>
	<div id="blog-news"><div id="profile_block">昵称：<a href="https://home.cnblogs.com/u/2lianzhang/">为什么名字这么难</a><br>园龄：<a href="https://home.cnblogs.com/u/2lianzhang/" title="入园时间：2017-12-17">1年6个月</a><br>粉丝：<a href="https://home.cnblogs.com/u/2lianzhang/followers/">4</a><br>关注：<a href="https://home.cnblogs.com/u/2lianzhang/followees/">1</a><div id="p_b_follow"><a href="javascript:void(0);" onclick="follow(&#39;2f724bc2-b6a0-4d8b-fc19-08d52f269005&#39;)">+加关注</a></div><script>getFollowStatus('2f724bc2-b6a0-4d8b-fc19-08d52f269005')</script></div></div><script type="text/javascript">loadBlogNews();</script>
</div>

			<div id="calendar"><div id="blog-calendar" style=""><table id="blogCalendar" class="Cal" cellspacing="0" cellpadding="0" title="Calendar">
	<tbody><tr><td colspan="7"><table class="CalTitle" cellspacing="0">
		<tbody><tr><td class="CalNextPrev"><a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2019/05/01&#39;);return false;">&lt;</a></td><td align="center">2019年6月</td><td class="CalNextPrev" align="right"><a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2019/07/01&#39;);return false;">&gt;</a></td></tr>
	</tbody></table></td></tr><tr><th class="CalDayHeader" align="center" abbr="日" scope="col">日</th><th class="CalDayHeader" align="center" abbr="一" scope="col">一</th><th class="CalDayHeader" align="center" abbr="二" scope="col">二</th><th class="CalDayHeader" align="center" abbr="三" scope="col">三</th><th class="CalDayHeader" align="center" abbr="四" scope="col">四</th><th class="CalDayHeader" align="center" abbr="五" scope="col">五</th><th class="CalDayHeader" align="center" abbr="六" scope="col">六</th></tr><tr><td class="CalOtherMonthDay" align="center">26</td><td class="CalOtherMonthDay" align="center">27</td><td class="CalOtherMonthDay" align="center">28</td><td class="CalOtherMonthDay" align="center">29</td><td class="CalOtherMonthDay" align="center">30</td><td class="CalOtherMonthDay" align="center">31</td><td class="CalWeekendDay" align="center">1</td></tr><tr><td class="CalWeekendDay" align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">6</td><td align="center">7</td><td class="CalWeekendDay" align="center">8</td></tr><tr><td class="CalWeekendDay" align="center">9</td><td align="center">10</td><td align="center">11</td><td align="center">12</td><td align="center">13</td><td align="center">14</td><td class="CalWeekendDay" align="center">15</td></tr><tr><td class="CalWeekendDay" align="center">16</td><td align="center">17</td><td align="center">18</td><td align="center">19</td><td align="center">20</td><td align="center">21</td><td class="CalWeekendDay" align="center">22</td></tr><tr><td class="CalWeekendDay" align="center">23</td><td align="center">24</td><td align="center">25</td><td align="center">26</td><td align="center">27</td><td class="CalTodayDay" align="center">28</td><td class="CalWeekendDay" align="center">29</td></tr><tr><td class="CalWeekendDay" align="center">30</td><td class="CalOtherMonthDay" align="center">1</td><td class="CalOtherMonthDay" align="center">2</td><td class="CalOtherMonthDay" align="center">3</td><td class="CalOtherMonthDay" align="center">4</td><td class="CalOtherMonthDay" align="center">5</td><td class="CalOtherMonthDay" align="center">6</td></tr>
</tbody></table></div><script type="text/javascript">loadBlogDefaultCalendar();</script></div>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"><div id="sidebar_search" class="sidebar-block">
<div id="sidebar_search" class="mySearch">
<h3 class="catListTitle">搜索</h3>
<div id="sidebar_search_box">
<div id="widget_my_zzk" class="div_my_zzk"><input type="text" id="q" onkeydown="return zzk_go_enter(event);" class="input_my_zzk">&nbsp;<input onclick="zzk_go()" type="button" value="找找看" id="btnZzk" class="btn_my_zzk"></div>
<div id="widget_my_google" class="div_my_zzk"><input type="text" name="google_q" id="google_q" onkeydown="return google_go_enter(event)" class="input_my_zzk">&nbsp;<input onclick="google_go()" type="button" value="谷歌搜索" class="btn_my_zzk"></div>
</div>
</div>

</div><div id="sidebar_shortcut" class="sidebar-block">
<div class="catListLink">
<h3 class="catListTitle">常用链接</h3>
<ul>
<li><a href="https://www.cnblogs.com/2lianzhang/p/" title="我的博客的随笔列表">我的随笔</a></li><li><a href="https://www.cnblogs.com/2lianzhang/MyComments.html" title="我发表过的评论列表">我的评论</a></li><li><a href="https://www.cnblogs.com/2lianzhang/OtherPosts.html" title="我评论过的随笔列表">我的参与</a></li><li><a href="https://www.cnblogs.com/2lianzhang/RecentComments.html" title="我的博客的评论列表">最新评论</a></li><li><a href="https://www.cnblogs.com/2lianzhang/tag/" title="我的博客的标签列表">我的标签</a></li>
<li><a id="itemListLink" onclick="this.blur();WarpClass(&#39;itemListLink&#39;, &#39;itemListLin_con&#39;);return false;" href="https://www.cnblogs.com/2lianzhang/p/8058762.html#">更多链接</a></li>
</ul>
<div id="itemListLin_con" style="display:none;">
<ul>

</ul>
</div>
</div></div><div id="sidebar_toptags" class="sidebar-block">
<div class="catListTag">
<h3 class="catListTitle">我的标签</h3>
<ul>
<li><a href="https://www.cnblogs.com/2lianzhang/tag/Linux%20NFS%E5%AD%98%E5%82%A8%E6%9C%8D%E5%8A%A1%E9%83%A8%E7%BD%B2/">Linux NFS存储服务部署</a>(1)</li><li><a href="https://www.cnblogs.com/2lianzhang/tag/Linux%E5%88%86%E5%8C%BA%E6%96%B9%E5%BC%8F%E5%8F%8A%E5%85%B3%E9%97%ADiptables%E5%92%8Cselinux%E7%9A%84%E6%96%B9%E5%BC%8F/">Linux分区方式及关闭iptables和selinux的方式</a>(1)</li><li><a href="https://www.cnblogs.com/2lianzhang/tag/Linux%E8%B7%AF%E7%94%B1%E8%A1%A8%E4%BF%A1%E6%81%AF-route%E5%91%BD%E4%BB%A4/">Linux路由表信息-route命令</a>(1)</li><li><a href="https://www.cnblogs.com/2lianzhang/tag/Linux%E5%91%BD%E4%BB%A4%E6%8F%90%E7%A4%BA%E7%AC%A6-bash-4.1%24%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3/">Linux命令提示符-bash-4.1$错误解决</a>(1)</li><li><a href="https://www.cnblogs.com/2lianzhang/tag/Linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%8F%8Avim%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F/">Linux命令行快捷键及vim快捷方式</a>(1)</li><li><a href="https://www.cnblogs.com/2lianzhang/tag/Linux%E4%B8%ADansible%E6%89%B9%E9%87%8F%E7%AE%A1%E7%90%86%E8%BD%AF%E4%BB%B6%E9%83%A8%E7%BD%B2%E5%8F%8A%E5%89%A7%E6%9C%AC%E7%BC%96%E5%86%99/">Linux中ansible批量管理软件部署及剧本编写</a>(1)</li><li><a href="https://www.cnblogs.com/2lianzhang/tag/Linux%E4%B8%ADinotify%E8%BD%AF%E4%BB%B6%E9%83%A8%E7%BD%B2%E5%8F%8A%E5%8F%82%E6%95%B0%E4%BA%8B%E4%BB%B6%E6%BC%94%E7%A4%BA/">Linux中inotify软件部署及参数事件演示</a>(1)</li><li><a href="https://www.cnblogs.com/2lianzhang/tag/Linux%E4%B8%ADrsync%E5%A4%87%E4%BB%BD%E6%9C%8D%E5%8A%A1%E9%83%A8%E7%BD%B2/">Linux中rsync备份服务部署</a>(1)</li><li><a href="https://www.cnblogs.com/2lianzhang/tag/Linux%E4%B8%ADssh%E4%BB%8B%E7%BB%8D%E4%B8%8Essh%2Bkey%E5%AF%86%E9%92%A5%E7%99%BB%E9%99%86%E9%83%A8%E7%BD%B2/">Linux中ssh介绍与ssh+key密钥登陆部署</a>(1)</li><li><a href="https://www.cnblogs.com/2lianzhang/tag/Linux%E4%B8%AD%E9%85%8D%E7%BD%AE%E5%88%AB%E5%90%8D/">Linux中配置别名</a>(1)</li><li><a href="https://www.cnblogs.com/2lianzhang/tag/">更多</a></li>
</ul>
</div></div><div id="sidebar_categories">
<div class="catListPostArchive">
<h3 class="catListTitle">随笔档案</h3>

<ul>

<li><a id="CatList_LinkList_0_Link_0" href="https://www.cnblogs.com/2lianzhang/archive/2017/12.html">2017年12月 (11)</a> </li>

</ul>

</div>

</div><div id="sidebar_recentcomments" class="sidebar-block"><div id="recent_comments_wrap" style="display: none;">
<div class="catListComment">
<h3 class="catListTitle">最新评论</h3>

	<div id="RecentCommentsBlock"></div>
</div>
</div></div><div id="sidebar_topviewedposts" class="sidebar-block"><div id="topview_posts_wrap">
<div class="catListView">
<h3 class="catListTitle">阅读排行榜</h3>
	<div id="TopViewPostsBlock"><ul><li><a href="https://www.cnblogs.com/2lianzhang/p/8052312.html">1. 命令提示符-bash-4.1$错误解决(3211)</a></li><li><a href="https://www.cnblogs.com/2lianzhang/p/8052254.html">2. Linux中配置别名(2003)</a></li><li><a href="https://www.cnblogs.com/2lianzhang/p/8052299.html">3. Linux中重命名乱码文件(1295)</a></li><li><a href="https://www.cnblogs.com/2lianzhang/p/8052281.html">4. Linux命令行快捷键及vim快捷方式(1063)</a></li><li><a href="https://www.cnblogs.com/2lianzhang/p/8058762.html">5. Linux中ansible批量管理软件部署及剧本编写(625)</a></li></ul></div>
</div>
</div></div><div id="sidebar_topcommentedposts" class="sidebar-block"><div id="topfeedback_posts_wrap" style="display: none;">
<div class="catListFeedback">
<h3 class="catListTitle">评论排行榜</h3>
	<div id="TopFeedbackPostsBlock"></div>
</div>
</div></div><div id="sidebar_topdiggedposts" class="sidebar-block"><div id="topdigg_posts_wrap" style="display: none;">
<div class="catListView">
<h3 class="catListTitle">推荐排行榜</h3>
<div id="TopDiggPostsBlock"></div>
</div></div></div></div><script type="text/javascript">loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		
<!--done-->
Copyright ©2019 为什么名字这么难 谨以此模板祝贺【博客园开发者征途】系列图书之《你必须知道的.NET》出版发行
	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->



</body></html>