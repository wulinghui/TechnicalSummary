/**
 * Minified by jsDelivr using UglifyJS v3.4.4.
 * Original file: /gh/BNDong/Cnblogs-Theme-SimpleMemory@8fefc5cfe0a4f2aaf357dff2a9c7e6527f369398/js/MyTween.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var C,c,viewWidth,viewHeight,cols,rows,tris,interval,mouseX=mouseY=mouseOldX=mouseOldY=0,triW=14,triH=20,neighbours=["side","top","bottom"],speedTrailAppear=.1,speedTrailDisappear=.1,speedTriOpen=1,trailMaxLength=30,trailIntervalCreation=100,delayBeforeDisappear=2,randomAlpha=!0,colors=window.cnblogsConfig.essayTopAnimationColors;function openComplete(t){t.opened=!0,t.opening=!1,t.closing=!1}function closeComplete(t){t.opened=!1,t.opening=!1,t.closing=!1}function unselectTris(){for(var t=0;t<tris.length;t++)tris[t].selectedForTrail=!1}function createTrail(){var t;unselectTris();var i=Math.floor(Math.random()*trailMaxLength-2)+2,e=Math.round(Math.random()*tris.length);startTri=tris[e],void 0!==startTri.selectedForTrail&&(startTri.selectedForTrail=!0),t={tri:startTri,openDir:"side",closeDir:"side"};for(var s=0;s<i;s++){var r,o=getNeighbour(t.tri);if(null==o){t.tri.open(t.openDir,speedTriOpen,r,(s+1)*speedTrailAppear),t.tri.close(t.closeDir,1,delayBeforeDisappear+(s+1)*speedTrailDisappear);break}o.tri.selectedForTrail=!0,r=randomAlpha&&Math.random()<.8?.5*Math.random():1,t.tri.closeDir=o.openDir,t.tri.open(t.openDir,speedTriOpen,r,s*speedTrailAppear),t.tri.close(t.closeDir,1,delayBeforeDisappear+s*speedTrailDisappear),t=o}}function getNeighbour(t){shuffleArray(neighbours);for(var i=0;i<neighbours.length;i++)if("top"==neighbours[i]){if(0!=t.row&&!tris[t.pos-cols].selectedForTrail&&!tris[t.pos-cols].opened)return{tri:tris[t.pos-cols],openDir:"top",closeDir:"top"}}else if("bottom"==neighbours[i]){if(t.row!=rows-1&&!tris[t.pos+cols].selectedForTrail&&!tris[t.pos+cols].opened)return{tri:tris[t.pos+cols],openDir:"bottom",closeDir:"top"}}else{if(t.isLeft&&t.col!=cols-1&&!tris[t.pos+1].selectedForTrail&&!tris[t.pos+1].opened)return{tri:tris[t.pos+1],openDir:"side",closeDir:"top"};if(!t.isLeft&&0!=t.col&&!tris[t.pos-1].selectedForTrail&&!tris[t.pos-1].opened)return{tri:tris[t.pos-1],openDir:"side",closeDir:"top"}}return null}function draw(){c.clearRect(0,0,C.width,C.height);for(var t=0;t<tris.length;t++)tris[t].draw()}function handleResize(){viewWidth=C.width=C.scrollWidth,viewHeight=C.height=C.scrollHeight,rectCanvas=C.getBoundingClientRect(),start()}function hexToRgb(t){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null}function shuffleArray(t){for(var i,e,s=t.length;s;i=Math.floor(Math.random()*s),e=t[--s],t[s]=t[i],t[i]=e);return t}function initCanvas(t){C=document.getElementById(t),c=C.getContext("2d"),viewWidth=C.width=C.scrollWidth,viewHeight=C.height=C.scrollHeight,initParams(),window.addEventListener("resize",handleResize),TweenLite.ticker.addEventListener("tick",draw),handleResize()}function initParams(){cols=(cols=Math.floor(viewWidth/triW))%2?cols:cols-1,rows=2*Math.floor(viewHeight/triH),tris=[]}function initGrid(){for(var t=0;t<rows;t++)for(var i=0;i<cols;i++){var e=new Triangle(i+t*cols,i,t);tris.push(e),e.draw()}}function start(){interval&&clearInterval(interval),initParams(),initGrid(),interval=setInterval(createTrail,trailIntervalCreation),createTrail()}function pause(){interval&&clearInterval(interval);for(var t=0;t<tris.length;t++)tris[t].tweenClose&&tris[t].tweenClose.kill()}function closeAll(){var t=0;interval&&clearInterval(interval);for(var i=0;i<tris.length;i++)tris[i].tweenOpen&&tris[i].tweenOpen.kill(),(tris[i].opened||tris[i].opening)&&(t++,tris[i].close("top",.8,.2+.0015*t))}function kill(){interval&&clearInterval(interval);for(var t=0;t<tris.length;t++)TweenLite.killTweensOf(tris[t]),tris[t].alpha=0}Triangle=function(t,i,e){var a=this;this.selectedForTrail=!1,this.pos=t,this.col=i,this.row=e,this.alpha=this.tAlpha=1,this.color=colors[Math.floor(Math.random()*colors.length)],this.rgb=hexToRgb(this.color),this.opened=!1,this.opening=!1,this.closing=!1,this.isLeft=this.pos%2,this.tX1=this.isLeft?(this.col+1)*triW:this.col*triW,this.tX2=this.isLeft?this.col*triW:(this.col+1)*triW,this.tX3=this.isLeft?(this.col+1)*triW:this.col*triW,this.x1=this.tX1,this.x2=this.tX1,this.x3=this.tX1,this.tY1=.5*this.row*triH,this.tY2=.5*(this.row+1)*triH,this.tY3=.5*(this.row+2)*triH,this.y1=this.tY1,this.y2=this.tY1,this.y3=this.tY1,this.tweenClose,this.tweenOpen,this.draw=function(){c.fillStyle="rgba("+this.rgb.r+","+this.rgb.g+","+this.rgb.b+","+this.alpha+")",c.beginPath(),c.moveTo(this.x1,this.y1),c.lineTo(this.x2,this.y2),c.lineTo(this.x3,this.y3),c.closePath(),c.fill()},this.open=function(t,i,e,s){this.opened&&this.opening||(this.tweenClose&&this.tweenClose.kill(),this.opening=!0,this.direction=t||"top",this.delay=s||0,this.tAlpha=e,this.tSpeed=i||1.5,"side"==this.direction?(this.x1=this.x2=this.x3=this.tX1,this.y1=this.tY1,this.y2=this.tY2,this.y3=this.tY3):"top"==this.direction?(this.x1=(this.tX2+this.tX3)/2,this.x2=this.tX2,this.x3=this.tX3,this.y1=(this.tY2+this.tY3)/2,this.y2=this.tY2,this.y3=this.tY3):"bottom"==this.direction&&(this.x1=this.tX1,this.x2=this.tX2,this.x3=(this.tX1+this.tX2)/2,this.y1=this.tY1,this.y2=this.tY2,this.y3=(this.tY1+this.tY2)/2),this.tweenOpen=TweenMax.to(this,this.tSpeed,{x1:this.tX1,x2:this.tX2,x3:this.tX3,y1:this.tY1,y2:this.tY2,y3:this.tY3,alpha:this.tAlpha,ease:Strong.easeInOut,delay:this.delay,onComplete:openComplete,onCompleteParams:[a]}))},this.close=function(t,i,e){var s,r,o,h,n,l;this.direction=t||"top",this.delay=e||1,this.tSpeed=i||.8,this.opened=!1,this.closing=!0,"side"==this.direction?(s=r=o=this.tX1,h=this.tY1,n=this.tY2,l=this.tY3):"top"==this.direction?(s=(this.tX2+this.tX3)/2,r=this.tX2,o=this.tX3,h=(this.tY2+this.tY3)/2,n=this.tY2,l=this.tY3):"bottom"==this.direction&&(s=this.tX1,r=this.tX2,o=(this.tX1+this.tX2)/2,h=this.tY1,n=this.tY2,l=(this.tY1+this.tY2)/2),this.tweenClose&&this.tweenClose.kill(),this.tweenClose=TweenMax.to(this,this.tSpeed,{x1:s,x2:r,x3:o,y1:h,y2:n,y3:l,alpha:0,ease:Strong.easeInOut,delay:this.delay,onComplete:closeComplete,onCompleteParams:[a]})}};
//# sourceMappingURL=/sm/fce7dd7541a49cad2e3ce0c99b663d0aa7658624cadcc9d66d9e27be416f23b8.map