<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ShardingSphere | 资料总结</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="个人资料总结，存放笔记">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.76dfa4dd.css" as="style"><link rel="preload" href="/assets/js/app.7f63dd6c.js" as="script"><link rel="preload" href="/assets/js/2.fe5f2a1d.js" as="script"><link rel="preload" href="/assets/js/3.eb8c603e.js" as="script"><link rel="preload" href="/assets/js/180.a0fc0bcd.js" as="script"><link rel="prefetch" href="/assets/js/10.fe6b23fc.js"><link rel="prefetch" href="/assets/js/100.523c1b31.js"><link rel="prefetch" href="/assets/js/101.bbee1e6c.js"><link rel="prefetch" href="/assets/js/102.36d68ded.js"><link rel="prefetch" href="/assets/js/103.482d8685.js"><link rel="prefetch" href="/assets/js/104.9b20475d.js"><link rel="prefetch" href="/assets/js/105.0edc73b7.js"><link rel="prefetch" href="/assets/js/106.a9abfe31.js"><link rel="prefetch" href="/assets/js/107.2178a4c5.js"><link rel="prefetch" href="/assets/js/108.21d19ed0.js"><link rel="prefetch" href="/assets/js/109.5e1e3698.js"><link rel="prefetch" href="/assets/js/11.7d4a2ffb.js"><link rel="prefetch" href="/assets/js/110.ccc910aa.js"><link rel="prefetch" href="/assets/js/111.fcfd17d0.js"><link rel="prefetch" href="/assets/js/112.f91ccf6e.js"><link rel="prefetch" href="/assets/js/113.5cd28a7e.js"><link rel="prefetch" href="/assets/js/114.4ca8676c.js"><link rel="prefetch" href="/assets/js/115.c4d64d4e.js"><link rel="prefetch" href="/assets/js/116.47ba7426.js"><link rel="prefetch" href="/assets/js/117.3062ccb9.js"><link rel="prefetch" href="/assets/js/118.27991bba.js"><link rel="prefetch" href="/assets/js/119.53538539.js"><link rel="prefetch" href="/assets/js/12.ac798cdb.js"><link rel="prefetch" href="/assets/js/120.e9666755.js"><link rel="prefetch" href="/assets/js/121.73a1660e.js"><link rel="prefetch" href="/assets/js/122.59ac137e.js"><link rel="prefetch" href="/assets/js/123.b9124c91.js"><link rel="prefetch" href="/assets/js/124.12ffcf50.js"><link rel="prefetch" href="/assets/js/125.0403278b.js"><link rel="prefetch" href="/assets/js/126.cec37905.js"><link rel="prefetch" href="/assets/js/127.605a5010.js"><link rel="prefetch" href="/assets/js/128.a4cf61d9.js"><link rel="prefetch" href="/assets/js/129.164a08ce.js"><link rel="prefetch" href="/assets/js/13.8de4385c.js"><link rel="prefetch" href="/assets/js/130.1d4164bd.js"><link rel="prefetch" href="/assets/js/131.7796e583.js"><link rel="prefetch" href="/assets/js/132.c79c715f.js"><link rel="prefetch" href="/assets/js/133.48384f22.js"><link rel="prefetch" href="/assets/js/134.bf85bfff.js"><link rel="prefetch" href="/assets/js/135.1244d4cb.js"><link rel="prefetch" href="/assets/js/136.6650b052.js"><link rel="prefetch" href="/assets/js/137.e9f394e2.js"><link rel="prefetch" href="/assets/js/138.ae16527d.js"><link rel="prefetch" href="/assets/js/139.df1c969c.js"><link rel="prefetch" href="/assets/js/14.d82e6d84.js"><link rel="prefetch" href="/assets/js/140.a80aa424.js"><link rel="prefetch" href="/assets/js/141.10ab646d.js"><link rel="prefetch" href="/assets/js/142.508278ee.js"><link rel="prefetch" href="/assets/js/143.62aa16a7.js"><link rel="prefetch" href="/assets/js/144.c734b314.js"><link rel="prefetch" href="/assets/js/145.7dae44b0.js"><link rel="prefetch" href="/assets/js/146.b08fb7ab.js"><link rel="prefetch" href="/assets/js/147.6fee9f53.js"><link rel="prefetch" href="/assets/js/148.5a09fe8b.js"><link rel="prefetch" href="/assets/js/149.27046d2c.js"><link rel="prefetch" href="/assets/js/15.f0dc0e66.js"><link rel="prefetch" href="/assets/js/150.c05ae37c.js"><link rel="prefetch" href="/assets/js/151.57194eb1.js"><link rel="prefetch" href="/assets/js/152.bc7ad385.js"><link rel="prefetch" href="/assets/js/153.b3c7d891.js"><link rel="prefetch" href="/assets/js/154.0d3a00e5.js"><link rel="prefetch" href="/assets/js/155.b9afdc01.js"><link rel="prefetch" href="/assets/js/156.bfc71798.js"><link rel="prefetch" href="/assets/js/157.43852835.js"><link rel="prefetch" href="/assets/js/158.785caaa2.js"><link rel="prefetch" href="/assets/js/159.1716fd78.js"><link rel="prefetch" href="/assets/js/16.1217969a.js"><link rel="prefetch" href="/assets/js/160.54dfc0be.js"><link rel="prefetch" href="/assets/js/161.3a486b71.js"><link rel="prefetch" href="/assets/js/162.4365dac4.js"><link rel="prefetch" href="/assets/js/163.9e0305ed.js"><link rel="prefetch" href="/assets/js/164.9af7099c.js"><link rel="prefetch" href="/assets/js/165.07230640.js"><link rel="prefetch" href="/assets/js/166.a13e993d.js"><link rel="prefetch" href="/assets/js/167.233c305e.js"><link rel="prefetch" href="/assets/js/168.86996235.js"><link rel="prefetch" href="/assets/js/169.c643487c.js"><link rel="prefetch" href="/assets/js/17.65771bc0.js"><link rel="prefetch" href="/assets/js/170.fed7e19e.js"><link rel="prefetch" href="/assets/js/171.a191947e.js"><link rel="prefetch" href="/assets/js/172.a2368c89.js"><link rel="prefetch" href="/assets/js/173.aad8acd6.js"><link rel="prefetch" href="/assets/js/174.e5c4e9f4.js"><link rel="prefetch" href="/assets/js/175.ef19ddcf.js"><link rel="prefetch" href="/assets/js/176.7b8490c3.js"><link rel="prefetch" href="/assets/js/177.7d1f01a3.js"><link rel="prefetch" href="/assets/js/178.c5ea1f87.js"><link rel="prefetch" href="/assets/js/179.e54bc218.js"><link rel="prefetch" href="/assets/js/18.69d253af.js"><link rel="prefetch" href="/assets/js/181.8029f765.js"><link rel="prefetch" href="/assets/js/182.72075fe8.js"><link rel="prefetch" href="/assets/js/183.f74d77ba.js"><link rel="prefetch" href="/assets/js/184.3277cbcd.js"><link rel="prefetch" href="/assets/js/185.15940a23.js"><link rel="prefetch" href="/assets/js/186.810a303a.js"><link rel="prefetch" href="/assets/js/187.9c8777f6.js"><link rel="prefetch" href="/assets/js/188.fed55d48.js"><link rel="prefetch" href="/assets/js/189.7f09c5db.js"><link rel="prefetch" href="/assets/js/19.87ab5597.js"><link rel="prefetch" href="/assets/js/190.082d7cbc.js"><link rel="prefetch" href="/assets/js/191.9fb2ec38.js"><link rel="prefetch" href="/assets/js/192.167d2083.js"><link rel="prefetch" href="/assets/js/193.d1eeb947.js"><link rel="prefetch" href="/assets/js/194.09e61c12.js"><link rel="prefetch" href="/assets/js/195.969efb5f.js"><link rel="prefetch" href="/assets/js/196.3932e830.js"><link rel="prefetch" href="/assets/js/197.1dc355f6.js"><link rel="prefetch" href="/assets/js/198.1ad8dbbf.js"><link rel="prefetch" href="/assets/js/199.c6b23b90.js"><link rel="prefetch" href="/assets/js/20.3d741608.js"><link rel="prefetch" href="/assets/js/200.81a125db.js"><link rel="prefetch" href="/assets/js/201.5e2fd593.js"><link rel="prefetch" href="/assets/js/202.51a3fbc4.js"><link rel="prefetch" href="/assets/js/203.4ae7c4f4.js"><link rel="prefetch" href="/assets/js/204.5ba79932.js"><link rel="prefetch" href="/assets/js/205.05bb64e4.js"><link rel="prefetch" href="/assets/js/206.c1d5472b.js"><link rel="prefetch" href="/assets/js/207.ad43feb1.js"><link rel="prefetch" href="/assets/js/208.250144c5.js"><link rel="prefetch" href="/assets/js/209.41667b8a.js"><link rel="prefetch" href="/assets/js/21.23841fc1.js"><link rel="prefetch" href="/assets/js/210.b85ec988.js"><link rel="prefetch" href="/assets/js/211.8f2f9335.js"><link rel="prefetch" href="/assets/js/212.dea21e7c.js"><link rel="prefetch" href="/assets/js/213.9074d848.js"><link rel="prefetch" href="/assets/js/214.baaf02d5.js"><link rel="prefetch" href="/assets/js/215.e3149f2c.js"><link rel="prefetch" href="/assets/js/216.5ede3f02.js"><link rel="prefetch" href="/assets/js/217.06eb8901.js"><link rel="prefetch" href="/assets/js/218.ffe5fc66.js"><link rel="prefetch" href="/assets/js/219.69c6166f.js"><link rel="prefetch" href="/assets/js/22.b55e8e09.js"><link rel="prefetch" href="/assets/js/220.a83c1ecf.js"><link rel="prefetch" href="/assets/js/221.fb65c799.js"><link rel="prefetch" href="/assets/js/222.1ff261ff.js"><link rel="prefetch" href="/assets/js/223.807c2de7.js"><link rel="prefetch" href="/assets/js/224.33540594.js"><link rel="prefetch" href="/assets/js/225.21d88d75.js"><link rel="prefetch" href="/assets/js/226.00d419d7.js"><link rel="prefetch" href="/assets/js/227.19678a11.js"><link rel="prefetch" href="/assets/js/228.d09fe33c.js"><link rel="prefetch" href="/assets/js/229.c8dcc95e.js"><link rel="prefetch" href="/assets/js/23.d7449079.js"><link rel="prefetch" href="/assets/js/230.7477ad3f.js"><link rel="prefetch" href="/assets/js/231.f1013950.js"><link rel="prefetch" href="/assets/js/232.1e07d0e6.js"><link rel="prefetch" href="/assets/js/233.34e0f2b8.js"><link rel="prefetch" href="/assets/js/234.645446d8.js"><link rel="prefetch" href="/assets/js/235.3368fdbc.js"><link rel="prefetch" href="/assets/js/236.35ed0de0.js"><link rel="prefetch" href="/assets/js/237.4a189e89.js"><link rel="prefetch" href="/assets/js/238.d6580ef3.js"><link rel="prefetch" href="/assets/js/239.c518fd70.js"><link rel="prefetch" href="/assets/js/24.26f18aa6.js"><link rel="prefetch" href="/assets/js/240.14979636.js"><link rel="prefetch" href="/assets/js/241.95c3b00d.js"><link rel="prefetch" href="/assets/js/242.a214e307.js"><link rel="prefetch" href="/assets/js/243.273af8d4.js"><link rel="prefetch" href="/assets/js/244.e2d74303.js"><link rel="prefetch" href="/assets/js/245.fe562cb9.js"><link rel="prefetch" href="/assets/js/246.b40011af.js"><link rel="prefetch" href="/assets/js/247.dc1a9aae.js"><link rel="prefetch" href="/assets/js/248.d691ac20.js"><link rel="prefetch" href="/assets/js/249.191f742a.js"><link rel="prefetch" href="/assets/js/25.198594bf.js"><link rel="prefetch" href="/assets/js/250.205b92cf.js"><link rel="prefetch" href="/assets/js/251.acb8a80e.js"><link rel="prefetch" href="/assets/js/26.c817356c.js"><link rel="prefetch" href="/assets/js/27.6b812306.js"><link rel="prefetch" href="/assets/js/28.9048721b.js"><link rel="prefetch" href="/assets/js/29.bfda8510.js"><link rel="prefetch" href="/assets/js/30.eb1b6ab9.js"><link rel="prefetch" href="/assets/js/31.3f3dbd2f.js"><link rel="prefetch" href="/assets/js/32.006bc754.js"><link rel="prefetch" href="/assets/js/33.05d371fe.js"><link rel="prefetch" href="/assets/js/34.27cd6ff5.js"><link rel="prefetch" href="/assets/js/35.35409a6d.js"><link rel="prefetch" href="/assets/js/36.fd6a950b.js"><link rel="prefetch" href="/assets/js/37.c8fd6ef4.js"><link rel="prefetch" href="/assets/js/38.028a36a2.js"><link rel="prefetch" href="/assets/js/39.e4494792.js"><link rel="prefetch" href="/assets/js/4.ff2df22c.js"><link rel="prefetch" href="/assets/js/40.979dec53.js"><link rel="prefetch" href="/assets/js/41.ff9662db.js"><link rel="prefetch" href="/assets/js/42.5c1441fc.js"><link rel="prefetch" href="/assets/js/43.9657eae8.js"><link rel="prefetch" href="/assets/js/44.a6cb5e5c.js"><link rel="prefetch" href="/assets/js/45.c675440c.js"><link rel="prefetch" href="/assets/js/46.06205970.js"><link rel="prefetch" href="/assets/js/47.ded0c65e.js"><link rel="prefetch" href="/assets/js/48.296a6f26.js"><link rel="prefetch" href="/assets/js/49.1b2ec2ab.js"><link rel="prefetch" href="/assets/js/5.ecde23f9.js"><link rel="prefetch" href="/assets/js/50.e551e67f.js"><link rel="prefetch" href="/assets/js/51.122d5b68.js"><link rel="prefetch" href="/assets/js/52.c0444208.js"><link rel="prefetch" href="/assets/js/53.f47d6b86.js"><link rel="prefetch" href="/assets/js/54.e9c9b41b.js"><link rel="prefetch" href="/assets/js/55.77010c1f.js"><link rel="prefetch" href="/assets/js/56.387aacbb.js"><link rel="prefetch" href="/assets/js/57.ddcf78ad.js"><link rel="prefetch" href="/assets/js/58.908b88fc.js"><link rel="prefetch" href="/assets/js/59.8ff535f1.js"><link rel="prefetch" href="/assets/js/6.b928f1b9.js"><link rel="prefetch" href="/assets/js/60.c5018386.js"><link rel="prefetch" href="/assets/js/61.1514e08b.js"><link rel="prefetch" href="/assets/js/62.79bc9197.js"><link rel="prefetch" href="/assets/js/63.a6cb5e14.js"><link rel="prefetch" href="/assets/js/64.f149661c.js"><link rel="prefetch" href="/assets/js/65.30fa2026.js"><link rel="prefetch" href="/assets/js/66.e7f9f54e.js"><link rel="prefetch" href="/assets/js/67.7361f4a3.js"><link rel="prefetch" href="/assets/js/68.b67cc099.js"><link rel="prefetch" href="/assets/js/69.ba730416.js"><link rel="prefetch" href="/assets/js/7.b0514d37.js"><link rel="prefetch" href="/assets/js/70.45b9e858.js"><link rel="prefetch" href="/assets/js/71.2055eaae.js"><link rel="prefetch" href="/assets/js/72.75ec1304.js"><link rel="prefetch" href="/assets/js/73.3aa09b6b.js"><link rel="prefetch" href="/assets/js/74.fb3013f1.js"><link rel="prefetch" href="/assets/js/75.c837c896.js"><link rel="prefetch" href="/assets/js/76.9e6df886.js"><link rel="prefetch" href="/assets/js/77.4eb09ab0.js"><link rel="prefetch" href="/assets/js/78.06d19c8c.js"><link rel="prefetch" href="/assets/js/79.dfde586d.js"><link rel="prefetch" href="/assets/js/8.f86f2563.js"><link rel="prefetch" href="/assets/js/80.476da6d1.js"><link rel="prefetch" href="/assets/js/81.2b778375.js"><link rel="prefetch" href="/assets/js/82.abbf449f.js"><link rel="prefetch" href="/assets/js/83.24b0e8ea.js"><link rel="prefetch" href="/assets/js/84.f8694c96.js"><link rel="prefetch" href="/assets/js/85.f030e8b6.js"><link rel="prefetch" href="/assets/js/86.18853c72.js"><link rel="prefetch" href="/assets/js/87.4eca3df6.js"><link rel="prefetch" href="/assets/js/88.26b81c78.js"><link rel="prefetch" href="/assets/js/89.ae216049.js"><link rel="prefetch" href="/assets/js/9.7a3e1618.js"><link rel="prefetch" href="/assets/js/90.b0ee8ab4.js"><link rel="prefetch" href="/assets/js/91.a07b34f1.js"><link rel="prefetch" href="/assets/js/92.1c2952b1.js"><link rel="prefetch" href="/assets/js/93.e199901d.js"><link rel="prefetch" href="/assets/js/94.a901578c.js"><link rel="prefetch" href="/assets/js/95.641f6644.js"><link rel="prefetch" href="/assets/js/96.84a54aa3.js"><link rel="prefetch" href="/assets/js/97.c489ec61.js"><link rel="prefetch" href="/assets/js/98.5fb17174.js"><link rel="prefetch" href="/assets/js/99.c004152a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.76dfa4dd.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="资料总结" class="logo"> <span class="site-name can-hide">资料总结</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/goVersion181/" class="nav-link">go</a></div><div class="nav-item"><a href="/pages/springFramework/" class="nav-link">java</a></div><div class="nav-item"><a href="/pages/e5d517/" class="nav-link">云原生</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/pages/410b25/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/00291d/" class="nav-link">mysql</a></li><li class="dropdown-item"><!----> <a href="/pages/846ee6/" class="nav-link">redis</a></li><li class="dropdown-item"><!----> <a href="/pages/5465c3/" class="nav-link">MongoDB</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/853b5b/" class="nav-link">设计模式详解</a></li><li class="dropdown-item"><!----> <a href="/pages/ebc515/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/pages/57778e/" class="nav-link">前端</a></li><li class="dropdown-item"><!----> <a href="/pages/282cd0/" class="nav-link">项目</a></li><li class="dropdown-item"><!----> <a href="/pages/2cd810/" class="nav-link">理论基础</a></li><li class="dropdown-item"><!----> <a href="/pages/6acd46/" class="nav-link">运营</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/wulinghui/TechnicalSummary" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src=""> <div class="blogger-info"><h3>linghui Wu</h3> <span>一只努力学飞的鱼</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/goVersion181/" class="nav-link">go</a></div><div class="nav-item"><a href="/pages/springFramework/" class="nav-link">java</a></div><div class="nav-item"><a href="/pages/e5d517/" class="nav-link">云原生</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/pages/410b25/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/00291d/" class="nav-link">mysql</a></li><li class="dropdown-item"><!----> <a href="/pages/846ee6/" class="nav-link">redis</a></li><li class="dropdown-item"><!----> <a href="/pages/5465c3/" class="nav-link">MongoDB</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/853b5b/" class="nav-link">设计模式详解</a></li><li class="dropdown-item"><!----> <a href="/pages/ebc515/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/pages/57778e/" class="nav-link">前端</a></li><li class="dropdown-item"><!----> <a href="/pages/282cd0/" class="nav-link">项目</a></li><li class="dropdown-item"><!----> <a href="/pages/2cd810/" class="nav-link">理论基础</a></li><li class="dropdown-item"><!----> <a href="/pages/6acd46/" class="nav-link">运营</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/wulinghui/TechnicalSummary" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>java-se</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/82ccdc/" class="sidebar-link">java集合</a></li><li><a href="/pages/896e60/" class="sidebar-link">计算机基础</a></li><li><a href="/pages/739af7/" class="sidebar-link">并发编程</a></li><li><a href="/pages/d54a64/" class="sidebar-link">java线程</a></li><li><a href="/pages/2cbf58/" class="sidebar-link">java协程</a></li><li><a href="/pages/fa044f/" class="sidebar-link">synchronized</a></li><li><a href="/pages/27f771/" class="sidebar-link">Unsafe&amp;Atomic</a></li><li><a href="/pages/93bc6a/" class="sidebar-link">AQS</a></li><li><a href="/pages/107c2e/" class="sidebar-link">Lock</a></li><li><a href="/pages/3f92cf/" class="sidebar-link">JUC工具杂记</a></li><li><a href="/pages/d910a4/" class="sidebar-link">Queue</a></li><li><a href="/pages/556d3b/" class="sidebar-link">线程池原理</a></li><li><a href="/pages/c745c1/" class="sidebar-link">Future</a></li><li><a href="/pages/32e109/" class="sidebar-link">ForkJoin</a></li><li><a href="/pages/1105f3/" class="sidebar-link">BIO，NIO，AIO</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>jvm</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>mybatis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Netty</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>爬虫 webmagic</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>spring-cloud</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>中间件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>flowable</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>idea工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>maven</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ms</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>java部署</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>原生安卓</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06970110><div class="articleInfo" data-v-06970110><ul class="breadcrumbs" data-v-06970110><li data-v-06970110><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06970110></a></li> <li data-v-06970110><a href="/categories/?category=java" title="分类" data-v-06970110>java</a></li><li data-v-06970110><a href="/categories/?category=%E4%B8%AD%E9%97%B4%E4%BB%B6" title="分类" data-v-06970110>中间件</a></li></ul> <div class="info" data-v-06970110><div title="作者" class="author iconfont icon-touxiang" data-v-06970110><a href="https://gitee.com/hellowllh/projects" target="_blank" title="作者" class="beLink" data-v-06970110>wulinghui</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06970110><a href="javascript:;" data-v-06970110>2022-03-08</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">ShardingSphere<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h1> <p>最初叫ShardingJDBC。到现在他包含三个重要的产品ShardingJDBC、ShardingProxy和 ShardingSidecar。</p> <table><thead><tr><th></th> <th>ShardingJDBC</th> <th>ShardingProxy</th></tr></thead> <tbody><tr><td>数据库</td> <td>任意</td> <td>MySQL/PostgreSQL</td></tr> <tr><td>连接消耗数</td> <td>高</td> <td>低</td></tr> <tr><td>异构语言</td> <td>仅java</td> <td>任意</td></tr> <tr><td>性能</td> <td>损耗低</td> <td>损耗略高</td></tr> <tr><td>中心化</td> <td>无</td> <td>是</td></tr> <tr><td>静态入口</td> <td>无</td> <td>有</td></tr> <tr><td>业务侵入</td> <td>大</td> <td>无</td></tr></tbody></table> <h1 id="shardingjdbc"><a href="#shardingjdbc" class="header-anchor">#</a> ShardingJDBC</h1> <h2 id="读写分离"><a href="#读写分离" class="header-anchor">#</a> 读写分离</h2> <p>核心配置mast name，slave name就行了。</p> <h2 id="核心概念"><a href="#核心概念" class="header-anchor">#</a> 核心概念</h2> <ul><li>逻辑表：水平拆分的数据库的相同逻辑和数据结构表的总称</li> <li>真实表：在分片的数据库中真实存在的物理表。</li> <li>数据节点：数据分片的最小单元。由数据源名称和数据表组成</li> <li>绑定表：分片规则一致的主表和子表。  防止笛卡尔集，提高性能。绑定关系不能自定义，按分片的计算结果绑定的。</li> <li>广播表：也叫公共表，指素有的分片数据源中都存在的表，表结构和表中的数据 在每个数据库中都完全一致(强一致性的)。例如字典表。</li> <li>分片键：用于分片的数据库字段，是将数据库(表)进行水平拆分的关键字段。 SQL中若没有分片字段，将会执行全路由，性能会很差。</li> <li>分片算法：通过分片算法将数据进行分片，支持通过=、BETWEEN和IN分片。 分片算法需要由应用开发者自行实现，可实现的灵活度非常高。</li> <li>分片策略：真正用于进行分片操作的是分片键+分片算法。分库和分表策略可以随意组合。</li></ul> <h2 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h2> <ul><li>配置真实数据源</li> <li>指定表的分布情况</li> <li>指定表的主键生成策略</li> <li>选定计算的字段</li> <li>根据计算的字段算出对应的库名。</li> <li>根据计算的字段算出对应的表名。</li></ul> <h2 id="分片算法"><a href="#分片算法" class="header-anchor">#</a> 分片算法</h2> <h3 id="noneshardingstrategy"><a href="#noneshardingstrategy" class="header-anchor">#</a> NoneShardingStrategy</h3> <p>不分片</p> <h3 id="inlineshardingstrategy"><a href="#inlineshardingstrategy" class="header-anchor">#</a> InlineShardingStrategy</h3> <ul><li>内联分片</li> <li>按照分片表达式来进行分片。</li> <li>支持 = 或者 IN</li> <li>不支持范围分片</li></ul> <h3 id="standardshardingstrategy"><a href="#standardshardingstrategy" class="header-anchor">#</a> StandardShardingStrategy</h3> <ul><li>标准分片，精确和范围。</li> <li>自定义实现类实现算法</li> <li>支持 = 或者 IN  范围，其中精确分片算法是必须提供的，而范围分片算法则是可选的。</li> <li>只支持单分片键的标准分片策略</li></ul> <h3 id="complexshardingstrategy"><a href="#complexshardingstrategy" class="header-anchor">#</a> ComplexShardingStrategy</h3> <ul><li>复杂分片，多字段分表</li> <li>有标准分片的特性，同时提供按照多个分片列进行综合分片的算法</li> <li>但是分片的类型要保持一致</li></ul> <h3 id="hintshardingstrategy"><a href="#hintshardingstrategy" class="header-anchor">#</a> HintShardingStrategy</h3> <ul><li>强制路由分片</li> <li>强制走业务代码算法中设置的表。比如在按userid奇偶分片的策略下，select userid from t_user where userid in (1,3,5,7,9)可以操作的。</li> <li>分片键是线程隔离的，只在当前线程有效，所以通常建 议使用之后立即关闭，或者用try资源方式打开。</li> <li>限制: 不支持函数计算，不支持多层子查询，不支持UNION</li></ul> <h2 id="主键生成策略"><a href="#主键生成策略" class="header-anchor">#</a> 主键生成策略</h2> <p>默认提供了UUID和SNOWFLAKE</p> <h3 id="uuid"><a href="#uuid" class="header-anchor">#</a> UUID</h3> <p>采用UUID.randomUUID()的方式产生唯一且不重复的分布式主键。最终生成一 个字符串类型的主键。缺点是生成的主键无序。</p> <h3 id="snowflake"><a href="#snowflake" class="header-anchor">#</a> SNOWFLAKE</h3> <ul><li><p>雪花算法,能够保证不同进程主键的不重复性，<strong>相同进程</strong>主键的有序性。</p></li> <li><p>缺点：强依赖机器时钟，如果机器上时钟回拨，会导致发号重复。</p></li> <li><p>注意: 他是局部有序，不是全局有序。</p></li> <li><p>二进制形式 包含4部分，从高位到低位分表为：1bit符号位、41bit时间戳位、10bit工作进程位 以及12bit序列号位。</p></li></ul> <h3 id="spi扩展"><a href="#spi扩展" class="header-anchor">#</a> SPI扩展</h3> <ul><li><p>目标： 1、全局唯一，2、高性能，3、高可用，4、趋势递增</p></li> <li><p>通过SPI实现对应接口实现</p></li> <li><p>不要再应用层给他设置主键，<strong>切记</strong>。</p></li> <li><p>可以采用时间+redis分布式主键获得区段自增，以实现扩容时不需要进行数据迁移。</p></li></ul> <h2 id="sql使用限制"><a href="#sql使用限制" class="header-anchor">#</a> SQL使用限制</h2> <h1 id="分片内核剖析"><a href="#分片内核剖析" class="header-anchor">#</a> 分片内核剖析</h1> <h2 id="解析引擎"><a href="#解析引擎" class="header-anchor">#</a> 解析引擎</h2> <p>词法解析器用于将SQL拆解成抽象语法树，一开始采用Druid再自研再用ANLTR再增加一些AST的缓存机制(针对ANLTR4的特性，官网<strong>建议尽量</strong>采用PreparedStatement的预编译方式来提高SQL执行的性能)。</p> <h2 id="路由引擎"><a href="#路由引擎" class="header-anchor">#</a> 路由引擎</h2> <p>根据解析上下文匹配数据库和表的分片策略，生成路由路径。</p> <p>单片路由、多片路由、范围路由、广播路由</p> <h2 id="改写引擎"><a href="#改写引擎" class="header-anchor">#</a> 改写引擎</h2> <p>用户只需要面向逻辑库和逻辑表来写SQL，最终由ShardigSphere的改写引擎将 SQL改写为在真实数据库中可以正确执行的语句。</p> <h2 id="执行引擎"><a href="#执行引擎" class="header-anchor">#</a> 执行引擎</h2> <p>ShardingSphere并不是简单的将改写完的SQL提交到数据库执行。执行引擎的目标是自动化的平衡资源控制和执行效率，目前就是靠下面的模式。</p> <h3 id="内存限制模式"><a href="#内存限制模式" class="header-anchor">#</a> 内存限制模式</h3> <p>不限制连接数，并发执行，但是查询并发，结果集会使用<strong>流式归并</strong>(这个过程慢n^2)，解决内存溢出，吞吐量高，适合OLAP数据分析场景。</p> <h3 id="连接限制模式"><a href="#连接限制模式" class="header-anchor">#</a> 连接限制模式</h3> <p>对连接数进行限制，内存不限制，查询查用<strong>串行</strong>，结果集<strong>内存归并</strong>，<strong>效率高</strong>，比较适合小数据量的OLTP事务场景。</p> <h2 id="归并引擎"><a href="#归并引擎" class="header-anchor">#</a> 归并引擎</h2> <p>将从各个数据节点获取的多数据结果集，组合成为一个结果集并正确的返回至请求 客户端，称为结果归并。</p> <h3 id="流式归并"><a href="#流式归并" class="header-anchor">#</a> 流式归并</h3> <p>流式归并是指以一条一条数据的方式进行迭代归并，而内存归并是将所有结果集 都查询到内存中，进行统一归并</p> <h3 id="内存归并"><a href="#内存归并" class="header-anchor">#</a> 内存归并</h3> <p>读出来都在jvm内存中处理。</p> <h3 id="排序归并"><a href="#排序归并" class="header-anchor">#</a> 排序归并</h3> <p>多个库，有多个指针去遍历。</p> <h1 id="spi"><a href="#spi" class="header-anchor">#</a> SPI</h1> <p>具体的见官网的《开发者⼿册》</p> <h2 id="解析"><a href="#解析" class="header-anchor">#</a> 解析</h2> <ul><li>SQLParserFacade： 配置⽤于 SQL 解析的词法分析器和语法分析器⼊口</li> <li>SQLVisitorFacade ： SQL 语法树访问器⼊口</li> <li>ShardingSphereRuleBuilder ： ⽤于将⽤⼾配置转化为规则对象</li></ul> <h2 id="内核"><a href="#内核" class="header-anchor">#</a> 内核</h2> <ul><li>DatabaseType ： ⽀持的数据库类型</li> <li>SQLRouter ： ⽤于处理路由结果</li> <li>SQLRewriteContextDecorator ： ⽤于处理 SQL 改写结果</li> <li>SQLExecutionHook ： SQL 执⾏过程监听器</li> <li>ResultProcessEngine ： ⽤于处理结果集</li></ul> <h2 id="数据分片"><a href="#数据分片" class="header-anchor">#</a> 数据分⽚</h2> <ul><li>ShardingAlgorithm ： 分⽚算法</li> <li>KeyGenerateAlgorithm ： 分布式主键⽣成算法</li> <li>DatabaseSQLEntry ： 获取当前时间的数据库⽅⾔</li></ul> <h2 id="其他功能"><a href="#其他功能" class="header-anchor">#</a> 其他功能</h2> <ul><li>ReplicaLoadBalanceAlgorithm ： 读库负载均衡算法</li> <li>EncryptAlgorithm ： 数据加密算法</li> <li>ShardingTransactionManager ： 分布式事务管理器</li></ul> <h1 id="分布式事务处理方式"><a href="#分布式事务处理方式" class="header-anchor">#</a> 分布式事务处理方式</h1> <p>强一致性与最终一致性（柔性事务BASE）</p> <h2 id="本地事务"><a href="#本地事务" class="header-anchor">#</a> 本地事务</h2> <ul><li>不需要修改代码，用spring的@Transactional</li> <li>这也是<strong>默认使用</strong>的事务方式</li></ul> <p>⽀持项</p> <ul><li>完全⽀持⾮跨库事务</li> <li>完全⽀持因逻辑异常导致的跨库事务。例如：同⼀事务中，跨两个库更新。更新完毕后，抛出空指 针，则两个库的内容都能回滚。</li></ul> <p>不⽀持项</p> <ul><li>不⽀持因⽹络、硬件异常导致的跨库事务。例如：同⼀事务中，跨两个库更新，更新完毕后、未提 交之前，第⼀个库宕机，则只有第⼆个库数据提交。</li> <li>不支持跨节点和服务的，比如feign调用了其他的微服务。</li></ul> <h2 id="xa-两阶段事务"><a href="#xa-两阶段事务" class="header-anchor">#</a> XA 两阶段事务</h2> <ul><li>需要引入相关依赖和配置</li> <li>ShardingSphere默认采用atomikos作为实现框架实现JTA规范用于XA规范。</li> <li>同时，也支持bitronix、narayana等框架，甚至提供了SPI扩展点</li></ul> <p>⽀持项</p> <ul><li>⽀持数据分⽚后的跨库事务。</li> <li>两阶段提交保证操作的原⼦性和数据的强⼀致性。</li> <li>服务宕机重启后，提交/回滚中的事务可⾃动恢复。</li> <li>⽀持同时使⽤ XA 和⾮ XA 的连接池。</li></ul> <p>不⽀持项</p> <ul><li>服务宕机后，在其它机器上恢复提交/回滚中的数据。</li></ul> <h2 id="seata-柔性事务"><a href="#seata-柔性事务" class="header-anchor">#</a> Seata 柔性事务</h2> <ul><li>其实也是更多的基于Seata的AT模式（柔性事务BASE）</li> <li>也有SPI接口</li></ul> <p>⽀持项</p> <ul><li>⽀持数据分⽚后的跨库事务</li> <li>⽀持 RC 隔离级别</li> <li>通过 undo 快照进⾏事务回滚</li> <li>⽀持服务宕机后的，⾃动恢复提交中的事务。</li></ul> <p>不⽀持项</p> <ul><li>不⽀持除 RC 之外的隔离级别。</li></ul> <h1 id="shardingproxy"><a href="#shardingproxy" class="header-anchor">#</a> ShardingProxy</h1> <p>ShardingProxy的功能同样是分库分表，但是他是一个独立部署的服务端，提供统一的数据库代理服务。</p> <p>注意，ShardingProxy目前只支持MySQL和 PostgreSQL。</p> <h1 id="测试影子库"><a href="#测试影子库" class="header-anchor">#</a> 测试影子库</h1> <ul><li>进⾏压测数据隔离的影⼦数据库，与⽣产数据库应当使⽤相同的配置。</li> <li>再生产库中，创建平级的影子库，避免环境和主机的问题。</li> <li>可以采用Sharding的影子库功能，多添加一个列，用于标识走对应的影子库。</li></ul> <h1 id="项目使用核心步骤"><a href="#项目使用核心步骤" class="header-anchor">#</a> 项目使用核心步骤</h1> <ol><li>定义分库分表数据源，再启动类排除默认spring的数据源。</li> <li>设置默认不分表的数据源</li> <li>定制分库分表规则</li> <li>分库分表规则优化： 分库分表规则、绑定表、读写分离、自定义路由策略、自定义主键生成策略等</li></ol> <h1 id="旧数据处理方式"><a href="#旧数据处理方式" class="header-anchor">#</a> 旧数据处理方式</h1> <p>在业务过程中做分库分表，必然要做数据迁移。下面是比较稳妥的方案</p> <ol><li>要评估数据分片方案，对关键的SQL进行整理并分析</li> <li>将不支持的sql改成其他方式实现</li> <li>制定好了分库分表方案，包括主键/分片/路由等等。</li> <li>不要着急实践，最好是在业务中对SQL进行数据双写（老数据库也写一份）。也可以用SPI的扩展点去做。</li> <li>这上面的过程中，再去分析方案是不是合适，那些需要调整的，都合适了之后，就可以进行<strong>旧数据迁移</strong>了。可以采用ShardingProxy、keetle等工具去做这些操作。</li> <li>然后把双写去掉。</li></ol> <h1 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h1> <h2 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h2> <ul><li><p>分片算法</p></li> <li><p>自定义主键生成，等等相关的SPI</p> <blockquote><p>比如大尺度上按范围分片，但是在每个数据范围内，使用取模分片。</p> <p>这样利于扩展又够均匀。</p> <p>这个还要配合分片策略来做具体的分片，比如要采用Standard中的precise精确分片方式。</p></blockquote></li> <li><p>注意用绑定表减少笛卡尔集</p></li> <li><p>注意: 他原生的默认分布式事务，只支持配置的多表和对应的操作，不支持块节点/服务，但是他支持SeataAT。</p></li> <li><p>设置默认数据源；达到针对配置的表走分库分表策略，其他的没有配置的表还是会走对应的默认数据库。</p></li></ul> <h2 id="部署"><a href="#部署" class="header-anchor">#</a> 部署</h2> <ul><li>用混合模式部署，运维使用ShardingProxy，开发使用ShardingJDBC，用zk做统一配置。</li> <li>可以用MHA、nginx保证ShardingProxy高可用。</li></ul> <h2 id="原理"><a href="#原理" class="header-anchor">#</a> 原理</h2> <ul><li>通过datasource 整合其他框架。</li> <li>连接限制模式，内存限制模式</li> <li>流式归并，内存归并，排序归并</li></ul> <h1 id="思考"><a href="#思考" class="header-anchor">#</a> 思考</h1> <ul><li>如何将记录平均分配到两个库的四个表？</li> <li>为什么要配置绑定表？  减少笛卡尔集</li></ul> <h1 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h1> <p><a href="https://blog.csdn.net/roykingw/article/details/71486825" target="_blank" rel="noopener noreferrer">常用MAVEN打包方式总结<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/wulinghui/TechnicalSummary/edit/master/docs/java/50.中间件/ShardingSphere.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/01/24, 15:21:15</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/fff88c/"><div>
            架构升级踩坑之路
            <!----></div></a> <span class="date">02-27</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/ba6503/"><div>
            总结
            <!----></div></a> <span class="date">02-27</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/1b4e40/"><div>
            语法学习
            <!----></div></a> <span class="date">02-27</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:873406903@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/wulinghui" title="GitHub(移步到gitee)" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/hellowllh/projects" title="gitee" target="_blank" class="iconfont icon-gitee"></a><a href="https://blog.csdn.net/qq_41720208" title="CSDN" target="_blank" class="iconfont icon-gitee"></a><a href="https://www.cnblogs.com/wlh1995" title="博客园" target="_blank" class="iconfont icon-bokeyuan"></a></div> 
    | Copyright © 2021-2025
    <span>Wu lingui | <a href="" target="_blank"></a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.7f63dd6c.js" defer></script><script src="/assets/js/2.fe5f2a1d.js" defer></script><script src="/assets/js/3.eb8c603e.js" defer></script><script src="/assets/js/180.a0fc0bcd.js" defer></script>
  </body>
</html>
